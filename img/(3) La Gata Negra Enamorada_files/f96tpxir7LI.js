/*!CK:3767638831!*//*1427454582,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["1bsOM"]); }

__d("CreditCardTypeEnum",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={VISA:86,MASTERCARD:77,DISCOVER:68,AMERICANEXPRESS:65,DINERSCLUB:64,JCB:74};},null);
__d("P2PChannelType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_STATUS_CHANGED:"P2P\/TransferStatusChanged"};},null);
__d("P2PPasswordProtectionParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={STATUS:"status"};},null);
__d("P2PPasswordProtectionStatusTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={NOT_SET:0,DISABLED:1,ENABLED:2};},null);
__d("P2PPaymentCreditCardsTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENDING:1,RECEIVING:2};},null);
__d("P2PPaymentLoggerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_CANCEL_SEND:"UI_Actn_Send_Money_Cancelled",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount"};},null);
__d("P2PPaymentLoggerEventFlow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings"};},null);
__d("P2PTransferParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={TRANSFER_ID:"transfer_id",STATUS:"status",RISK_RESULT:"risk_result"};},null);
__d("P2PTransferStatus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={PENDING_SENDER_MANUAL_REVIEW:1,PENDING_SENDER_VERIFICATION:2,CANCELED_SENDER_RISK:3,PENDING_RECIPIENT_NUX:4,CANCELED_DECLINED:5,PENDING_RECIPIENT_VERIFICATION:6,PENDING_RECIPIENT_MANUAL_REVIEW:7,PENDING_RECIPIENT_PROCESSING:8,PENDING_PUSH_FAIL:9,CANCELED_RECIPIENT_RISK:10,CANCELED_SYSTEM_FAIL:11,CANCELED_EXPIRED:12,COMPLETED:13,INTERMEDIATE_PROCESSING:14,PENDING_SENDER_INITED:15,CANCELED_SAME_CARD:16,PENDING_SENDER_VERIFICATION_PROCESSING:17,PENDING_RECIPIENT_VERIFICATION_PROCESSING:18};},null);
__d("StoryAttachmentStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",CHECKIN:"checkin",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",BROADCAST_REQUEST:"broadcast_request",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",SOUVENIR:"souvenir",ORION:"orion",RETAIL_ITEM:"retail_item",RETAIL_RECEIPT:"retail_receipt",INSTANT_ARTICLE:"instant_article",RETAIL_CANCELLATION:"retail_cancellation",JOIN_TOPIC_CONVERSATION:"join_topic_conversation",MOMENTS_APP_INVITATION:"moments_app_invitation",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",SURVEY:"survey",MESSAGE_LOCATION:"message_location"};},null);
__d("XUIRadioList.react",["InputLabel.react","React","ReactChildren","XUIRadioInput.react","cloneWithProps"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"XUIRadioList",propTypes:{name:m.string,onValueChange:m.func,selectedValue:m.any},render:function(){var o=i.map(this.props.children,function(p){return k(p,{name:this.props.name,onSelect:this.props.onValueChange,selectedValue:this.props.selectedValue});},this);return h.createElement("ul",h.__spread({},this.props,{name:null}),o);}});n.Item=h.createClass({displayName:"Item",propTypes:{name:m.string,onSelect:m.func,selectedValue:m.any,value:m.any,disabled:m.bool},render:function(){return (h.createElement("li",{className:this.props.className},h.createElement(g,{display:"inline"},h.createElement(j,{checked:this.props.selectedValue===this.props.value,name:this.props.name,onChange:this._handleChange,value:this.props.value,disabled:!!this.props.disabled}),h.createElement("label",null,this.props.children))));},_handleChange:function(event){this.props.onSelect&&this.props.onSelect(event.target.value);}});e.exports=n;},null);
__d("MercuryMessageObject",["MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySingletonMixin","MercurySourceType","MercuryTimePassed","MercurySendMessageFields","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(v){"use strict";this.$MercuryMessageObject0=v;}s.prototype.constructUserGeneratedMessageObject=function(v,w,x,y,z){"use strict";var aa=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);if(typeof v=='string')v=v.replace(/^\s+/,'').replace(/\s+$/,'');aa.body=v;aa.has_attachment=false;aa.html_body=false;aa.attachments=[];aa.specific_to_list=y||[];aa.creator_info=z;return aa;};s.prototype.constructStickerMessageObject=function(v,w,x){"use strict";var y=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);y.has_attachment=true;y.html_body=false;y.attachments=[];y.sticker_id=v;y.specific_to_list=[];return y;};s.prototype.constructAttachmentMessageObject=function(v,w){"use strict";var x=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,v,w);x.attachments=[];x.specific_to_list=[];return x;};s.prototype.constructLogMessageObject=function(v,w,x,y){"use strict";var z=t(this.$MercuryMessageObject0,h.LOG_MESSAGE,v,w);z.log_message_type=x;z.log_message_data=y;return z;};s.prototype.normalizeNewMessage=function(v){"use strict";if(v.status===undefined)v.status=g.UNSENT;v.timestamp_absolute=q._("Hoy");v.message_id=v.message_id||j.generateMessageID(v.timestamp);var w=i.getParticipantIDFromUserID(this.$MercuryMessageObject0);v.specific_to_list=v.specific_to_list||[];if(v.specific_to_list.length&&v.specific_to_list.indexOf(w)===-1)v.specific_to_list.push(w);if(!v.thread_id){if(v.specific_to_list.length==1){v.thread_id='user:'+this.$MercuryMessageObject0;}else if(v.specific_to_list.length==2){var x=v.specific_to_list[0]==w?v.specific_to_list[1]:v.specific_to_list[0];v.thread_id=i.getThreadIDFromParticipantID(x);}v.thread_id=v.thread_id||'root:'+v.message_id;}if(!v.specific_to_list.length){var y=i.tokenize(v.thread_id),z=y.type,aa=y.value;if(z=='user')v.specific_to_list=['fbid:'+aa,w];}if(!v[p.MANUAL_RETRY_CNT])v[p.MANUAL_RETRY_CNT]=0;};s.prototype.normalizeResendMessage=function(v){"use strict";v.status=g.RESENDING;v.timestamp=Date.now();v[p.MANUAL_RETRY_CNT]+=1;};s.prototype.normalizeAddAttachmentPlaceholder=function(v,w,x){"use strict";if(x.preview_attachments.length>0){v.has_attachment=true;v.preview_attachments=x.preview_attachments;}v.client_state=k.DO_NOT_SEND_TO_SERVER;v.status=g.RESENDING;v.upload_id=w;};function t(v,w,x,y){var z=u(x)?[l.CHAT]:[],aa=Date.now(),ba=r(new Date(aa),'g:ia'),ca={action_type:w,thread_id:y,author:i.getParticipantIDFromUserID(v),author_email:null,coordinates:null,timestamp:aa,timestamp_absolute:(new Date(aa)).toLocaleDateString(),timestamp_relative:ba,timestamp_time_passed:o.TODAY,is_unread:false,is_cleared:false,is_forward:false,is_filtered_content:false,is_spoof_warning:false,source:x,source_tags:z};return ca;}function u(v){switch(v){case n.CHAT_WEB:case n.CHAT_JABBER:case n.CHAT_IPHONE:case n.CHAT_MEEBO:case n.CHAT_ORCA:case n.CHAT_TEST:case n.CHAT:case n.DESKTOP:return true;default:return false;}}Object.assign(s,m);e.exports=s;},null);
__d("MercuryMessageActions",["CurrentUser","MercuryActionType","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n){this.$MercuryMessageActions0=n;this.$MercuryMessageActions1=i.getForFBID(this.$MercuryMessageActions0);this.$MercuryMessageActions2=k.getForFBID(this.$MercuryMessageActions0);}m.prototype.send=function(n,o,p){o=o||Function.prototype;this.$MercuryMessageActions1.normalizeNewMessage(n);this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({},n),j.CLIENT_SEND_MESSAGE));this.$MercuryMessageActions2.sendNewMessage(n,p);o(n.thread_id);};m.prototype.resend=function(n,o){var p=Object.assign({},n);this.$MercuryMessageActions1.normalizeResendMessage(p);this.send(p,(void 0),o);};m.prototype.addAttachmentPlaceholder=function(n,o,p){this.$MercuryMessageActions1.normalizeAddAttachmentPlaceholder(n,o,p);this.$MercuryMessageActions1.normalizeNewMessage(n);this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({},n),j.CLIENT_SEND_MESSAGE));};m.prototype.cancelAttachmentPlaceholder=function(n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({upload_id:n,upload_data:o,action_type:h.CANCEL_ATTACHMENT_PLACEHOLDER},j.CLIENT_SEND_MESSAGE));};m.prototype.confirmAttachmentPlaceholder=function(n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({upload_id:n,upload_data:o,action_type:h.CONFIRM_ATTACHMENT_PLACEHOLDER},j.CLIENT_SEND_MESSAGE));};m.addShareDataToExistingMessage=function(n,o,p,q){q=q||g.getID();m.getForFBID(q).addShareDataToExistingMessage(n,o,p);};m.prototype.addShareDataToExistingMessage=function(n,o,p){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions4({server_id:n,attach_key:o,attach_data:p,action_type:h.ADD_SHARE_DATA_TO_EXISTING_MESSAGE},j.SERVER_ADD_SHARE_DATA_TO_EXISTING_MESSAGE));};m.prototype.markSpam=function(n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions5(n,o,h.MARK_MESSAGES_SPAM,j.CLIENT_MARK_MESSAGES_SPAM));};m.prototype["delete"]=function(n,o,p){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions5(n,o,h.DELETE_MESSAGES,p||j.CLIENT_DELETE_MESSAGES));};m.prototype.$MercuryMessageActions3=function(n,o){return {actions:[n],from_client:true,payload_source:o};};m.prototype.$MercuryMessageActions4=function(n,o){return {actions:[n],from_client:false,payload_source:o};};m.prototype.$MercuryMessageActions5=function(n,o,p,q){return {actions:[{action_type:p,action_id:null,thread_id:n,message_ids:o}],from_client:true,payload_source:q};};Object.assign(m,l);e.exports=m;},null);
__d("MercuryThreadActions",["MercuryActionType","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MessagingTag","merge"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(n){this.$MercuryThreadActions0=n;this.$MercuryThreadActions1=i.getForFBID(this.$MercuryThreadActions0);}m.prototype.markRead=function(n,o){this.batchMarkRead([n],o);};m.prototype.batchMarkRead=function(n,o){this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions2(n,true,o));};m.prototype.markUnread=function(n,o){this.batchMarkUnread([n],o);};m.prototype.batchMarkUnread=function(n,o){this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions2(n,false,o));};m.prototype.markSeen=function(n,o){this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([n],g.MARK_THREAD_SEEN,h.CLIENT_MARK_THREAD_SEEN,{persistent:o}));};m.prototype.archive=function(n,o){this.batchArchive([n],o);};m.prototype.batchArchive=function(n,o){n.forEach(function(p){this.$MercuryThreadActions1.changeThreadArchivedStatus(p,true,o);}.bind(this));this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions4(n,true));};m.prototype.unarchive=function(n,o){this.batchUnarchive([n],o);};m.prototype.batchUnarchive=function(n,o){n.forEach(function(p){this.$MercuryThreadActions1.changeThreadArchivedStatus(p,false,o);}.bind(this));this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions4(n,false));};m.prototype.markSpam=function(n,o){this.batchMarkSpam([n],o);};m.prototype.batchMarkSpam=function(n,o){n.forEach(function(p){this.$MercuryThreadActions1.markThreadSpam(p,o);}.bind(this));this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions5(n,k.SPAM));};m.prototype.unmarkSpam=function(n,o){this.batchUnmarkSpam([n],o);};m.prototype.batchUnmarkSpam=function(n,o){n.forEach(function(p){this.$MercuryThreadActions1.unmarkThreadSpam(p,o);}.bind(this));this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions5(n,k.INBOX));};m.prototype.changeFolder=function(n,o){this.batchChangeFolder([n],o);};m.prototype.batchChangeFolder=function(n,o){n.forEach(function(p){this.$MercuryThreadActions1.changeThreadFolder(p,o);}.bind(this));this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions5(n,o));};m.prototype["delete"]=function(n,o){this.batchDelete([n],o);};m.prototype.batchDelete=function(n,o){n.forEach(function(p){this.$MercuryThreadActions1.deleteThread(p,o);}.bind(this));this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3(n,g.DELETE_THREAD,h.CLIENT_DELETE_THREAD));};m.prototype.unmute=function(n){this.updateMuteSetting(n,0);};m.prototype.updateMuteSetting=function(n,o){this.$MercuryThreadActions1.changeMutingOnThread(n,o);this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([n],g.CHANGE_MUTE_SETTINGS,h.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:o}));};m.prototype.addParticipants=function(n,o){this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([n],g.ADD_PARTICIPANTS,h.CLIENT_ADD_PARTICIPANTS,{participants:o}));};m.prototype.unpinThread=function(n){this.$MercuryThreadActions1.unpinThread(n);this.$MercuryThreadActions1.handleUpdate(this.$MercuryThreadActions3([n],g.UNPIN_THREAD,h.CLIENT_UNPIN_THREAD));};m.prototype.$MercuryThreadActions2=function(n,o,p){return this.$MercuryThreadActions3(n,g.CHANGE_READ_STATUS,h.CLIENT_CHANGE_READ_STATUS,{mark_as_read:o,source:p});};m.prototype.$MercuryThreadActions4=function(n,o){return this.$MercuryThreadActions3(n,g.CHANGE_ARCHIVED_STATUS,h.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:o});};m.prototype.$MercuryThreadActions5=function(n,o){return this.$MercuryThreadActions3(n,g.CHANGE_FOLDER,h.CLIENT_CHANGE_FOLDER,{new_folder:o});};m.prototype.$MercuryThreadActions3=function(n,o,p,q){return {actions:n.map(function(r){return l({action_type:o,action_id:null,thread_id:r},q);}),from_client:true,payload_source:p};};Object.assign(m,j);e.exports=m;},null);
__d("P2PMercuryAttachmentSnippet.react",["CurrentUser","Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"P2PMercuryAttachment",propTypes:{sender:n.object,receiver:n.object,amount:n.string,currency:n.string},getDefaultProps:function(){return {sender:{},receiver:{}};},render:function(){var p;if(g.getID()===this.props.sender.id){p=k._("Enviaste {amount} {currency}.",[k.param("currency",this.props.currency),k.param("amount",this.props.amount)]);}else p=k._("{name} te envi\u00f3 {amount} {currency}",[k.param("name",this.props.sender.name),k.param("currency",this.props.currency),k.param("amount",this.props.amount)]);return (i.createElement("span",{className:"uiIconText _3l6h _3_io"},i.createElement(h,{height:12,src:l('/images/p2p/attachment-snippet-icon.png'),width:12}),p));}});e.exports=o;},null);
__d("MercuryShareAttachmentReactShape",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes;function j(){return i.shape({description:i.string,media:i.shape({image:i.string,duration:i.number,playable:i.bool,source:i.string}),source:i.string,style_list:i.arrayOf(i.string),subattachments:i.Object,title:i.string,properties:i.Object,uri:i.string}).isRequired;}e.exports=j;},null);
__d("MercuryFallbackShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryFallbackShareAttachmentSnippet",propTypes:{isSenderViewer:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("Compartiste un enlace"));}else o=(j._("{sender name} comparti\u00f3 un enlace.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/docs/generic.png')}),o));}});e.exports=n;},null);
__d("MercuryShareAttachmentSnippet.react",["Map","MercuryShareAttachmentReactShape","React","StoryAttachmentStyle","MercuryFallbackShareAttachmentSnippet.react","P2PMercuryShareAttachmentSnippet.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=new g();m.set(j.FALLBACK,b('MercuryFallbackShareAttachmentSnippet.react'));m.set(j.ORION,b('P2PMercuryShareAttachmentSnippet.react'));var n=i.createClass({displayName:"MercuryShareAttachmentSnippet",propTypes:{attachment:h(),isSenderViewer:l.bool,senderName:l.string},render:function(){var o=this.props.attachment;if(!o.style_list)return null;var p=null;for(var q=0;q<o.style_list.length;q++){p=m.get(o.style_list[q]);if(p)break;}if(!p)return null;return (i.createElement(p,i.__spread({},this.props)));}});e.exports=n;},null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","PhotoResizeModeConst","MercuryServerDispatcher","arrayContains","extendArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){"use strict";this._request.fbid=r;return this;};n.prototype.setType=function(r){"use strict";if(!l([h.PROFILE_PICTURE,h.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){"use strict";this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){"use strict";if(!l([j.COVER,j.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){"use strict";this._callback=r;return this;};n.prototype.send=function(){"use strict";if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){k.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new i();o=r;k.registerEndpoints({'/ajax/image_source.php':{request_user_id:g.getID(),mode:k.BATCH_DEFERRED_MULTI,batch_function:function(s,t){m(s.requests,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}e.exports=n;},null);
__d("MercuryParticipantFetcher",["MercuryIDs","MercuryPayloadSource","MercuryServerRequests","Set","ShortProfiles","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';function m(o){this.$MercuryParticipantFetcher0=i.getForFBID(o);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new j();this.$MercuryParticipantFetcher3=new j();}m.prototype.fetch=function(o){this.$MercuryParticipantFetcher4(o);this.$MercuryParticipantFetcher5();};m.prototype.fetchMulti=function(o){o.forEach(function(p){return this.$MercuryParticipantFetcher4(p);}.bind(this));this.$MercuryParticipantFetcher5();};m.prototype.$MercuryParticipantFetcher4=function(o){if(!this.$MercuryParticipantFetcher3.has(o))this.$MercuryParticipantFetcher2.add(o);};m.prototype.$MercuryParticipantFetcher5=function(){if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;l(function(){this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(o){return this.$MercuryParticipantFetcher3.add(o);}.bind(this));this.$MercuryParticipantFetcher6(this.$MercuryParticipantFetcher2,function(o){o.forEach(function(p){return this.$MercuryParticipantFetcher3["delete"](p.id);}.bind(this));this.$MercuryParticipantFetcher7(o);}.bind(this));this.$MercuryParticipantFetcher2.clear();}.bind(this));};m.prototype.$MercuryParticipantFetcher6=function(o,p){var q=[];o.forEach(function(r){var s=g.tokenize(r),t=s.type,u=s.value;t==='fbid'&&q.push(u);});if(q.length>0)k.getMulti(q,function(r){var s=[];for(var t in r)s.push(n(r[t],t));p(s);});};m.prototype.$MercuryParticipantFetcher7=function(o){this.$MercuryParticipantFetcher0.handleUpdate({participants:o,from_client:false,payload_source:h.SERVER_FETCH_PARTICIPANTS});};function n(o,p){var q=Object.assign({gender:o.gender,href:o.uri,id:g.getParticipantIDFromUserID(o.id||p),image_src:o.thumbSrc,name:o.name,short_name:o.firstName,employee:o.employee,is_employee_away:o.is_employee_away,type:o.type,vanity:o.vanity,is_friend:o.is_friend,is_messenger_user:o.is_messenger_user,orion_eligible:o.orionEligible,social_snippets:o.social_snippets},{});if(o.officeStatus){q.officeStatus=o.officeStatus;q.officeStatusStartDate=o.officeStatusStartDate;q.officeStatusEndDate=o.officeStatusEndDate;q.officeStatusComment=o.officeStatusComment;q.officeStatusLocation=o.officeStatusLocation;}return q;}e.exports=m;},null);
__d("MercuryParticipants",["CurrentUser","EventEmitter","ImageSourceRequest","ImageSourceType","ImmutableObject","KeyedCallbackManager","Map","MercuryAssert","MercuryIDs","MercuryParticipantFetcher","MercuryParticipantTypes","MercuryParticipantsConstants","MercuryServerRequests","PhotoResizeModeConst","Set","fbt","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x='change';function y(aa){this.$MercuryParticipants0=aa;this.$MercuryParticipants1=new h();this.$MercuryParticipants2=new l();this.$MercuryParticipants3=new p(this.$MercuryParticipants0);this.$MercuryParticipants4=new m();this.$MercuryParticipants5=s.getForFBID(this.$MercuryParticipants0);this.$MercuryParticipants5.subscribe('update-participants',function(ba,ca){if(ca.participants&&ca.participants.length>0){var da={};ca.participants.forEach(function(ea){da[ea.id]=ea;});this.$MercuryParticipants6(da);}}.bind(this));}y.prototype.addListener=function(aa,ba){return this.$MercuryParticipants1.addListener(aa,ba);};y.prototype.getIDFromVanityOrFBID=function(aa){if(!aa)return;if(this.$MercuryParticipants4.has(aa))return this.$MercuryParticipants4.get(aa);if(/^\d+$/.test(aa))return o.getParticipantIDFromUserID(aa);};y.prototype.getNow=function(aa){return this.$MercuryParticipants7(aa);};y.prototype.getOrFetch=function(aa){var ba=this.$MercuryParticipants7(aa);if(!ba)this.$MercuryParticipants3.fetch(aa);return ba;};y.prototype.get=function(aa,ba){n.isParticipantID(aa);return this.$MercuryParticipants8([aa],function(ca){ba(ca[aa]);});};y.prototype.getMulti=function(aa,ba){return this.$MercuryParticipants8(aa,ba);};y.prototype.getBigImageMulti=function(aa,ba){n.allParticipantIDs(aa);var ca=r.BIG_IMAGE_SIZE;return this.$MercuryParticipants8(aa,function(da){var ea={},fa=0,ga=new u(),ha=function(la,ma){fa++;ea[la]=ma;if(fa===aa.length){ba(ea);if(ga.size>0)this.$MercuryParticipants9(ga);}}.bind(this),ia=function(la,ma){this.$MercuryParticipants2.setResource(la,k.set(this.$MercuryParticipants2.getResource(la),{big_image_src:ma.uri}));ga.add(la);ha(la,ma.uri);}.bind(this);for(var ja in da){var ka=da[ja];if(!ka.big_image_src){new i().setFBID(o.getUserIDFromParticipantID(ja)).setType(j.PROFILE_PICTURE).setDimensions(ca,ca).setResizeMode(t.COVER).setCallback(ia.bind(null,ja)).send();}else ha(ka.id,ka.big_image_src);}}.bind(this));};y.prototype.getOrderedBigImageMulti=function(aa,ba){return this.getBigImageMulti(aa,function(ca){ba(aa.map(function(da){return ca[da];}));});};y.prototype.$MercuryParticipants8=function(aa,ba){n.allParticipantIDs(aa);var ca=this.$MercuryParticipants2.executeOrEnqueue(aa,ba),da=this.$MercuryParticipants2.getUnavailableResources(ca).filter(function(ea){var fa=o.tokenize(ea),ga=fa.type,ha=fa.value;if(ga==='email'){this.$MercuryParticipantsa(ea,ha);return false;}return true;}.bind(this));this.$MercuryParticipants3.fetchMulti(da);return this.$MercuryParticipantsb(ca);};y.prototype.$MercuryParticipants7=function(aa){var ba=this.$MercuryParticipants2.getResource(aa);if(!ba){var ca=o.tokenize(aa),da=ca.type,ea=ca.value;if(da==='email')ba=this.$MercuryParticipantsa(aa,ea);}return ba;};y.prototype.$MercuryParticipantsa=function(aa,ba){var ca=new k(z(aa,ba));this.$MercuryParticipants2.setResource(aa,ca);return ca;};y.prototype.$MercuryParticipants9=function(aa){this.$MercuryParticipants1.emit(x,aa);};y.prototype.$MercuryParticipants6=function(aa){aa=w(aa,function(ba,ca){if(ba.vanity)this.$MercuryParticipants4.set(ba.vanity,ca);return new k(this.$MercuryParticipantsc(ba));}.bind(this));this.$MercuryParticipants2.addResourcesAndExecute(aa);this.$MercuryParticipants9(new u(Object.keys(aa)));};y.prototype.$MercuryParticipantsc=function(aa){var ba=aa.type===q.USER||aa.type===q.FRIEND;if(!ba)return aa;if(!aa.name&&!aa.href&&!aa.vanity){var ca=v._("Usuario de Facebook");aa.name=ca;aa.short_name=ca;}return aa;};y.prototype.$MercuryParticipantsb=function(aa){return {remove:function(){this.$MercuryParticipants2.unsubscribe(aa);}.bind(this)};};function z(aa,ba){return {gender:r.UNKNOWN_GENDER,href:null,id:aa,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:ba,short_name:ba,employee:false};}e.exports=new y(g.getID());},null);
__d("MercuryAttachmentSnippet.react",["EmoticonsList","Image.react","MercuryAttachment","MercuryAttachmentType","MercuryConstants","MercuryIDs","P2PMercuryAttachmentSnippet.react","MercuryShareAttachmentSnippet.react","MercuryParticipants","React","StickerConstants","TextWithEmoticons.react","cx","fbt","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=p,x=w.PropTypes,y=p.createClass({displayName:"MercuryAttachmentSnippet",propTypes:{thread:x.object.isRequired,viewer:x.string.isRequired},componentWillMount:function(){this._ensureParticipant(this.props.thread.snippet_sender);this._setVariables(this.props);},componentWillReceiveProps:function(da){this._ensureParticipant(da.thread.snippet_sender);this._setVariables(da);},componentWillUnmount:function(){this._cancelParticipantFetch();},render:function(){var da=this._getSenderName();if(this._hasOnlyPhotos())return this._renderPhotoSnippet(da);if(this._hasOnlyAnimatedImages())return this._renderAnimatedImageSnippet(da);if(this._hasOnlyVideo())return this._renderVideoSnippet(da);if(this._hasAudioClip())return this._renderAudioClipSnippet(da);if(this._hasSticker())return this._renderStickerSnippet(da);if(this._hasOrion())return this._renderOrionSnippet(da);if(this._hasShoerackInvitation())return this._renderShoerackInvitationSnippet(da);if(this._hasShare())return this._renderShareSnippet(da);if(this._hasError())return this._renderError(da);return this._renderMixedSnippet(da);},_renderPhotoSnippet:function(da){var ea;if(this._photos.length===1){if(this._isViewerSender){ea=(t._("Enviaste una foto."));}else ea=(t._("{name} envi\u00f3 una foto.",[t.param("name",da)]));}else if(this._isViewerSender){ea=(t._({"*":"Enviaste {num_photos} fotos."},[t.param("num_photos",this._photos.length,[0])]));}else ea=(t._({"*":"{name} envi\u00f3 {num_photos} fotos."},[t.param("name",da),t.param("num_photos",this._photos.length,[0])]));return this._renderSnippet(ea);},_renderAnimatedImageSnippet:function(da){var ea;if(this._animatedImages.length===1){if(this._isViewerSender){ea=(t._("Enviaste un GIF."));}else ea=(t._("{name} envi\u00f3 un GIF.",[t.param("name",da)]));}else if(this._isViewerSender){ea=(t._("Enviaste {num_animated_images} GIF.",[t.param("num_animated_images",this._animatedImages.length)]));}else ea=(t._("{name} envi\u00f3 {num_animated_images} GIF.",[t.param("name",da),t.param("num_animated_images",this._animatedImages.length)]));return this._renderSnippet(ea);},_renderVideoSnippet:function(da){var ea;if(this._isViewerSender){ea=(t._("Enviaste un video."));}else ea=(t._("{sender name} envi\u00f3 un video.",[t.param("sender name",da)]));return this._renderSnippet(ea);},_renderAudioClipSnippet:function(da){var ea;if(this._isViewerSender){ea=(t._("Enviaste un mensaje de voz."));}else ea=(t._("{name} envi\u00f3 un mensaje de voz..",[t.param("name",da)]));return this._renderSnippet(ea);},_renderStickerSnippet:function(da){if(ba(this._attachments[0].metadata.stickerID)){return (p.createElement(r,{renderEmoticons:true,text:g.symbols.like}));}else if(this._isViewerSender){return (p.createElement("span",null,t._("Enviaste un sticker.")));}else return (p.createElement("span",null,t._("{name} envi\u00f3 un sticker.",[t.param("name",da)])));},_renderOrionSnippet:function(da){return (p.createElement("span",null,p.createElement(m,p.__spread({},this._attachments[0].metadata))));},_renderShoerackInvitationSnippet:function(da){var ea;if(this._isViewerSender){ea=(t._("Enviaste una invitaci\u00f3n de Moments."));}else ea=(t._("{sender name} te invit\u00f3 a compartir fotos con Moments.",[t.param("sender name",da)]));return this._renderSnippet(ea);},_renderShareSnippet:function(da){if(!!this._attachments[0].share)return (p.createElement(n,{attachment:this._attachments[0].share,senderName:da,isViewerSender:this._isViewerSender}));var ea;if(this._isViewerSender){ea=(t._("Compartiste un enlace"));}else ea=(t._("{sender name} comparti\u00f3 un enlace.",[t.param("sender name",da)]));return this._renderSnippet(ea);},_renderMixedSnippet:function(da){return (p.createElement("span",null,this._attachments.filter(function(ea){return ea.attach_type===j.FILE||ea.attach_type===j.PHOTO||ea.attach_type===j.VIDEO;}).map(function(ea,fa){return this._renderSnippet(ea.name,ea.icon_type,fa);}.bind(this))));},_renderSnippet:function(da,ea,fa){var ga=i.getAttachIconClass(ea||this._attachments[0].icon_type),ha=v(ga,"uiIconText _3l6h");return (p.createElement("span",{className:ha,key:fa},p.createElement(h,{src:u('/images/messaging/docs/generic.png')}),da));},_renderError:function(da){var ea;if(this._isViewerSender){ea=(t._("Enviaste un archivo adjunto."));}else ea=(t._("{sender name} envi\u00f3 un archivo adjunto.",[t.param("sender name",da)]));return this._renderSnippet(ea);},_hasOnlyPhotos:function(){return this._photos.length===this._attachments.length;},_hasOnlyAnimatedImages:function(){return this._animatedImages.length===this._attachments.length;},_hasOnlyVideo:function(){return (this._attachments.length===1&&this._attachments[0].attach_type===j.VIDEO);},_hasAudioClip:function(){return !!(this._attachments.length===1&&this._attachments[0].metadata&&i.isVoiceMessage(this._attachments[0].metadata.type));},_hasSticker:function(){return (this._attachments.length===1&&this._attachments[0].attach_type===j.STICKER);},_hasOrion:function(){return this._hasSingleAttachmentOfShareDataType(k.MercurySupportedShareType.FB_ORION);},_hasShoerackInvitation:function(){return this._hasSingleAttachmentOfShareDataType(k.MercurySupportedShareType.FB_SHOERACK_INVITATION);},_hasSingleAttachmentOfShareDataType:function(da){return (this._attachments.length===1&&this._attachments[0].share_data_type===da);},_hasShare:function(){return (this._attachments.length===1&&this._attachments[0].attach_type===j.SHARE);},_hasError:function(){return (this._attachments.length===1&&this._attachments[0].attach_type===j.ERROR);},_setVariables:function(da){this._viewer=da.viewer;this._sender=da.thread.snippet_sender;this._attachments=da.thread.snippet_attachments;this._photos=z(this._attachments);this._animatedImages=aa(this._attachments);this._isViewerSender=ca(this._sender,this._viewer);},_getSenderName:function(){if(!this._sender||this._isViewerSender)return null;var da=o.getNow(this._sender);if(!da)return null;return da.short_name;},_ensureParticipant:function(da){if(!da)return;this._cancelParticipantFetch();if(!o.getNow(da))this._sub=o.get(da,function(ea){return this.forceUpdate();}.bind(this));},_cancelParticipantFetch:function(){this._sub&&this._sub.remove();}});function z(da){if(!da)return [];return da.filter(function(ea){return ea.attach_type===j.PHOTO;});}function aa(da){if(!da)return [];return da.filter(function(ea){return ea.attach_type===j.ANIMATED_IMAGE;});}function ba(da){return (da==q.LIKE_STICKER_ID||da==q.HOT_LIKE_SMALL_STICKER_ID||da==q.HOT_LIKE_MEDIUM_STICKER_ID||da==q.HOT_LIKE_LARGE_STICKER_ID);}function ca(da,ea){return !!(da&&l.getParticipantIDFromUserID(ea)==da);}e.exports=y;},null);
__d("MercuryThreadImage.react",["ImmutableObject","MercuryIDs","MercuryParticipants","MercuryParticipantsConstants","Pixelz.react","React","SplitImage.react","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q=l.createClass({displayName:"MercuryThreadImage",propTypes:{thread:p.instanceOf(g).isRequired,viewer:p.string.isRequired,size:p.number},getInitialState:function(){return {participantImages:[]};},componentDidMount:function(){this._getParticipantImages(this.props);},componentWillReceiveProps:function(r,s){this._getParticipantImages(r);},shouldComponentUpdate:function(r,s){return (r.thread.image_src!==this.props.thread.image_src||r.size!==this.props.size||!n(s.participantImages,this.state.participantImages));},render:function(){var r=this.props.size||j.BIG_IMAGE_SIZE;if(this.props.thread.image_src)return (l.createElement(k,{height:r,resizeMode:'cover',src:this.props.thread.image_src,width:r}));if(this.state.participantImages.length>0)return (l.createElement(m,{srcs:this.state.participantImages,border:true,size:r}));return null;},_getParticipantImages:function(r){var s=r.thread,t=r.viewer;if(s.image_src)return;var u=h.getParticipantIDFromUserID(t),v=s.participants.filter(function(x){return x!=u;}),w=[];if(!v.length){w=[u];}else if(v.length==1){w=v;}else w=v.slice(0,3);i.getOrderedBigImageMulti(w,function(x){this.isMounted()&&this.setState({participantImages:x});}.bind(this));}});e.exports=q;},null);
__d("MercuryParticipantListRenderer",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$MercuryParticipantListRenderer0=false;this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=function(r){return this.$MercuryParticipantListRenderer1?r.short_name:r.name;}.bind(this);}h.prototype.renderParticipantList=function(r){var s=r.map(this.$MercuryParticipantListRenderer3);switch(s.length){case 0:return i(this.$MercuryParticipantListRenderer0);case 1:return j(s);case 2:return this.$MercuryParticipantListRenderer2?l(s):k(s);case 3:return this.$MercuryParticipantListRenderer2?n(s):m(s);default:return this.$MercuryParticipantListRenderer2?p(s):o(s);}};h.prototype.setIsNewThread=function(r){this.$MercuryParticipantListRenderer0=r;return this;};h.prototype.setNameRenderer=function(r){this.$MercuryParticipantListRenderer3=r;return this;};h.prototype.setUseShortName=function(r){this.$MercuryParticipantListRenderer1=r;return this;};h.prototype.setUseAndSeparator=function(r){this.$MercuryParticipantListRenderer2=r;return this;};function i(r){if(r){return (g._("Nuevo mensaje"));}else return (g._("No hay participantes"));}function j(r){return r[0];}function k(r){return (g._("{participant1}, {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function l(r){return (g._("{participant1} y {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function m(r){return (g._("{participant1}, {participant2}, {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function n(r){return (g._("{participant1}, {participant2} y {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function o(r){return (g._("{participant1}, {participant2}, {participant3}, {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2]),g.param("others_link",q(r.length-3))]));}function p(r){return (g._("{participant1}, {participant2} y {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("others_link",q(r.length-2))]));}function q(r){if(r>1){return (g._({"*":"{others_count} personas m\u00e1s"},[g.param("others_count",r,[0])]));}else return (g._("una persona m\u00e1s"));}e.exports=h;},null);
__d("MercuryThreadTitle.react",["MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","React","TextWithEmoticons.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadTitle",propTypes:{isNewThread:n.bool,thread:n.object.isRequired,viewer:n.string.isRequired,showUnreadCount:n.bool,useShortName:n.bool,useAndSeparator:n.bool},getDefaultProps:function(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};},getInitialState:function(){return {participantNames:''};},componentDidMount:function(){this._renderParticipantsList(this.props);},componentWillReceiveProps:function(p){this._renderParticipantsList(p);},render:function(){return (j.createElement("span",{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames));},getTitle:function(){return this.state.participantNames;},_renderThreadTitle:function(){var p=this.props.thread,q=j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:p.name});if(!p.unread_count||!this.props.showUnreadCount)return q;return this._renderTitleWithUnreadCount(q,p.unread_count);},_renderParticipantsList:function(p){if(p.thread.name)return;var q=g.getParticipantIDFromUserID(p.viewer),r=p.thread.participants;if(r.length>1)r=r.filter(function(s){return s!=q;});i.getMulti(r,function(s){if(!this.isMounted())return;var t=r.map(function(w){return s[w];}),u=new h().setUseShortName(this.props.useShortName).setUseAndSeparator(this.props.useAndSeparator).setIsNewThread(this.props.isNewThread).renderParticipantList(t),v=(p.showUnreadCount&&p.thread.unread_count)?this._renderTitleWithUnreadCount(u,p.thread.unread_count):u;this.setState({participantNames:v});}.bind(this));},_renderTitleWithUnreadCount:function(p,q){return (l._("{conversation-title} ({unread-count})",[l.param("conversation-title",p),l.param("unread-count",q)]));}});e.exports=o;},null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","URI","WebMessengerPermalinkConstants","WWWBase","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={getThreadURI:function(q,r,s){if(g.isCanonical(q)){n(q,r,s);}else o(q,r,s);}};function n(q,r,s){var t=new i(k.uri),u=g.tokenize(q).value;t.setPath(p(s)+'/'+u);r&&r(t.toString());}function o(q,r,s){l(['MercuryServerRequests'],function(t){var u=t.get();u.getServerThreadID(q,function(v){var w=new i(k.uri);w.setPath(j.getURIPathForThreadID(v,p(s)));r&&r(w.toString());});});}function p(q){var r=j.BASE_PATH;if(q&&q!=h.INBOX)r+='/'+q;return r;}e.exports=m;},null);
__d("MercuryThreadInfo",["CurrentUser","MercuryThreadMode"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={canReply:function(k){return !!(k.is_subscribed&&k.mode!=h.OBJECT_ORIGINATED&&!k.has_email_participant&&!k.read_only&&(k.recipients_loadable||k.recipients_loadable===(void 0)));},getMuteSetting:function(k){return (k.mute_settings&&k.mute_settings[j(g.getID())]);},isMuted:function(k){return i.getMuteSetting(k)!==(void 0);}};function j(k){return k+'@facebook.com';}e.exports=i;},null);
__d("MercuryMessages",["AsyncRequest","BanzaiODS","CurrentUser","EventEmitter","ImmutableObject","LogHistory","Map","MercuryActionStatus","MercuryActionType","MercuryAssert","MercuryAttachmentType","MercuryLogMessageType","MercuryMessageClientState","MercuryMessageInfo","MercuryPayloadSource","MercurySingletonMixin","MercuryMessageActions","MercuryMessageIDs","RangedCallbackManager","MercurySendMessageFields","MercuryServerRequests","MercuryThreadActions","MercuryThreadInformer","MercuryThreads","copyProperties","debounceAcrossTransitions","invariant","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();'use strict';var ia=new j(),ja=l.getInstance('mercury_messages');function ka(wa,xa){var ya=xa;if(wa._localIdsMap[xa])ya=wa._localIdsMap[xa];return wa._messages.get(ya);}function la(wa){switch(wa){case u.UNKNOWN:case u.SERVER_INITIAL_DATA:case u.SERVER_FETCH_THREAD_INFO:case u.SERVER_THREAD_SYNC:return true;}return false;}function ma(wa){return wa&&wa.substr(0,6)==='server';}function na(wa,xa){if(!wa._threadsToMessages[xa])wa._threadsToMessages[xa]=new y(function(ya){return ka(wa,ya).timestamp;},function(ya,za){return za-ya;});return wa._threadsToMessages[xa];}function oa(wa,xa,ya){xa.forEach(function(za){var ab=na(wa,za);ab.setReachedEndOfArray();wa._emitReorderedChange(za,ya);});}function pa(wa){this._fbid=wa;this._messageActions=w.getForFBID(this._fbid);this._serverRequests=aa.getForFBID(this._fbid);this._threadInformer=ca.getForFBID(this._fbid);this._threads=da.getForFBID(this._fbid);this._threadActions=ba.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new m();this._attachmentData={};this._messagesNeedingAttachmentData={};this._localIdsMap={};this._serverRequests.subscribe('update-messages',function(xa,ya){var za=(ya.actions||[]).filter(function(bb){var cb=bb.action_type,db=((bb.is_forward||bb.thread_id)&&(cb==o.LOG_MESSAGE||cb==o.USER_GENERATED_MESSAGE||cb==o.SEND_MESSAGE||cb==o.CLEAR_CHAT||cb==o.DELETE_THREAD||cb==o.DELETE_MESSAGES||cb==o.MARK_MESSAGES_SPAM)),eb=((bb.upload_id&&bb.upload_data)&&(cb==o.CANCEL_ATTACHMENT_PLACEHOLDER||cb==o.CONFIRM_ATTACHMENT_PLACEHOLDER)),fb=(cb==o.ADD_SHARE_DATA_TO_EXISTING_MESSAGE&&(bb.server_id&&bb.attach_key&&bb.attach_data));return (db||eb||fb);}),ab=la(ya.payload_source);if(ma(ya.payload_source))za.forEach(function(bb){if(!bb.is_forward&&bb.action_type!==o.ADD_SHARE_DATA_TO_EXISTING_MESSAGE){var cb=this._threads.getThreadMetaNow(bb.thread_id);if(cb)bb.is_cleared=bb.timestamp<cb.chat_clear_time;}}.bind(this));this.handleUpdates(za,ab,ya.payload_source,ya.from_client);if(ya.end_of_history)oa(this,ya.end_of_history,ya.payload_source);if(this._didChange){this._didChange=false;ia.emit('change');}}.bind(this));ja.debug('constructed',{fbid:this._fbid});}ea(pa.prototype,{getMessagesFromIDs:function(wa){return (wa||[]).map(ka.bind(null,this)).filter(function(xa){return xa;});},hasLoadedNMessages:function(wa,xa){var ya=na(this,wa);return ya.hasReachedEndOfArray()||ya.getCurrentArraySize()>=xa;},hasLoadedExactlyNMessages:function(wa,xa){var ya=na(this,wa);return ya.getCurrentArraySize()==xa;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new m();this._attachmentData={};this._messagesNeedingAttachmentData={};this._localIdsMap={};},getThreadMessagesRange:function(wa,xa,ya,za,ab,bb){var cb=na(this,wa),db=function(lb){za(qa(this,lb));}.bind(this),eb=cb.executeOrEnqueue(xa,ya,db),fb=cb.getUnavailableResources(eb),gb=this._failedHistoryFetchThreads[wa];if(fb.length&&!gb){var hb=cb.getCurrentArraySize(),ib=this._localTitanMessagesCount[wa]||0,jb=hb-ib,kb=fb.length+ib;ja.debug('fetch_missing_messages',{threadID:wa,offset:xa,limit:ya,missingIndices:fb,messageCount:hb,localMessageCount:ib});this._serverRequests.fetchThreadMessages(wa,jb,kb,ab,bb);}else this._failedHistoryFetchThreads[wa]=false;return eb;},getThreadMessagesRangeNow:function(wa,xa,ya){var za=na(this,wa),ab=[];for(var bb=xa;bb<xa+ya;bb++){var cb=za.getResourceAtIndex(bb),db=ka(this,cb);db&&ab.push(db);}return ab;},getThreadMessagesSinceTimestamp:function(wa,xa){var ya=na(this,wa),za=ya.getElementsUntil(xa);return qa(this,za);},hasLoadedAllMessages:function(wa){return na(this,wa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(wa){var xa=na(this,wa).getAllResources();return qa(this,xa);},unsubscribe:function(wa,xa){p.isThreadID(xa);var ya=na(this,xa);ya.unsubscribe(wa);},_addNewMessage:function(wa,xa){ta(this,xa);this._messages.set(wa,new k(xa));},_updateMessage:function(wa,xa,ya){var za=k.set(xa,ya);this._messages.set(wa,za);return za;},_addAttachmentData:function(wa,xa,ya){var za=ka(this,wa);if(za){var ab=za.attachments.indexOf(xa);if(ab!=-1){this._updateMessage(wa,za,{attachments:za.attachments.map(function(bb,cb){return (cb===ab)?ya:bb;})});this._emitUpdatedChange(za.thread_id,za.message_id,'attach');}}else{if(!this._attachmentData[wa])this._attachmentData[wa]=[];this._attachmentData[wa].push({attach_key:xa,data:ya});}},_shouldSortOutOfOrderMessages:function(wa,xa,ya){if(wa==u.CLIENT_CHANNEL_MESSAGE){var za=this.getThreadMessagesSinceTimestamp(xa,ya);if(za.length>0){h.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(wa,xa){var ya=wa.action_type;if(xa==u.CLIENT_CHANNEL_MESSAGE&&ya==o.USER_GENERATED_MESSAGE&&wa.threading_id&&this._localIdsMap[wa.threading_id]===wa.threading_id){wa.client_message_id=wa.threading_id;wa.status=n.SUCCESS;wa.action_type=o.SEND_MESSAGE;ya=wa.action_type;}if(xa===u.CLIENT_CHANNEL_MESSAGE&&ya==o.USER_GENERATED_MESSAGE){var za=this._threads.getThreadMetaNow(wa.thread_id);if(za&&za.folder)wa.folder=za.folder;}return wa;},handleUpdates:function(wa,xa,ya,za){var ab,bb={},cb={};for(var db=0;db<wa.length;db++){var eb=this._preprocessIncomingAction(wa[db],ya),fb=eb.action_type,gb=ka(this,eb.message_id);if(eb.is_forward||ya==u.SERVER_SEARCH){if(!this._messages.has(eb.message_id))this._addNewMessage(eb.message_id,eb);continue;}else if(eb.client_state===s.SEND_TO_SERVER){this._addNewMessage(eb.message_id,eb);continue;}else if(fb==o.SEND_MESSAGE){var hb=eb.client_message_id;if(hb&&this._localIdsMap[hb]&&eb.status){var ib=ka(this,hb),jb=ib.status;if(ib.status==n.SUCCESS)continue;if(eb.status==n.UNCONFIRMED){if(!cb[eb.thread_id])cb[eb.thread_id]=[];cb[eb.thread_id].push(hb);}else if(!bb[eb.thread_id])bb[eb.thread_id]=[];this._updateLocalMessage(eb);if(typeof jb!==(void 0)||eb.status==n.FAILED_UNKNOWN_REASON||eb.status==n.UNABLE_TO_CONFIRM||eb.status==n.SUCCESS||eb.status==n.ERROR)this._emitUpdatedChange(eb.thread_id,ka(this,hb).message_id,ya);}continue;}else if(fb==o.DELETE_THREAD){na(this,eb.thread_id).removeAllResources();continue;}else if(fb==o.DELETE_MESSAGES){this._deleteMessages(eb.thread_id,eb.message_ids,ya);continue;}else if(fb==o.CLEAR_CHAT){var kb=na(this,eb.thread_id).getAllResources(),lb={is_cleared:true};kb.forEach(function(rb){var sb=ka(this,rb);this._updateMessage(this._localIdsMap[rb]||rb,sb,lb);}.bind(this));continue;}else if(fb===o.MARK_MESSAGES_SPAM){this._markMessagesSpam(eb,ya);continue;}else if((eb.threading_id&&this._localIdsMap[eb.threading_id])||(gb&&!gb.is_forward)){if(gb&&eb.ranges&&eb.ranges.length>0){var mb=gb.message_id;this._updateMessage(this._localIdsMap[mb]||mb,gb,{ranges:wa.ranges});this._emitUpdatedChange(gb.thread_id,gb.message_id,'link_shim');}continue;}else if(fb===o.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(eb.upload_id,eb.upload_data);continue;}else if(fb===o.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(eb.upload_id,eb.upload_data);continue;}else if(fb===o.ADD_SHARE_DATA_TO_EXISTING_MESSAGE){this._addAttachmentData(eb.server_id,eb.attach_key,eb.attach_data);continue;}else{if(ya===u.CLIENT_SEND_MESSAGE){this._localIdsMap[eb.message_id]=eb.message_id;if(eb.thread_id=='root:'+eb.message_id)na(this,eb.thread_id).setReachedEndOfArray();}if(fb==o.LOG_MESSAGE&&eb.log_message_type==r.SERVER_ERROR)this._failedHistoryFetchThreads[eb.thread_id]=true;if(eb.client_state===s.DO_NOT_SEND_TO_SERVER&&eb.upload_id)this._uploadMessages[eb.upload_id]=eb;if(!bb[eb.thread_id])bb[eb.thread_id]=[];bb[eb.thread_id].push(eb.message_id);this._addNewMessage(eb.message_id,eb);if(eb.threading_id&&eb.threading_id!=eb.message_id)x.addServerID(eb.threading_id,eb.message_id);if(eb[z.MANUAL_RETRY_CNT]>0){ab=na(this,eb.thread_id);ab.resortResources([eb.message_id]);this._emitReorderedChange(eb.thread_id,u.CLIENT_SEND_MESSAGE);}xa=xa||this._shouldSortOutOfOrderMessages(ya,eb.thread_id,eb.timestamp);if(!xa)this._emitReceivedChange(ka(this,eb.message_id));continue;}}for(var nb in bb){ab=na(this,nb);var ob=ab.getAllResources(),pb=ob.filter(function(rb){var sb=this._messages.get(rb);return sb.action_type==o.LOG_MESSAGE&&sb.log_message_type==r.SERVER_ERROR;}.bind(this));ab.removeResources(pb);if(za)ra(this,nb,bb[nb]);if(xa){ab.addResources(bb[nb]);this._emitReorderedChange(nb,ya);}else ab.addResourcesWithoutSorting(bb[nb].reverse(),0);this._threadInformer.updatedThread(nb);}var qb=Object.keys(cb);if(qb.length)this._serverRequests.requestMessageConfirmation(cb);ja.debug('handle_updates',{localMessageCounts:ha(this._localTitanMessagesCount)});},isFirstMessage:function(wa){var xa=na(this,wa.thread_id);if(xa.getCurrentArraySize()===0)return false;var ya=xa.getResourceAtIndex(xa.getCurrentArraySize()-1),za=ka(this,ya).message_id,ab=ka(this,wa.message_id).message_id;return xa.hasReachedEndOfArray()&&za==ab;},_markMessagesSpam:function(wa,xa){var ya=wa,za=ya.thread_id,ab=ya.message_ids;if(!ab.length)return;this._deleteIndividualMessages(za,ab,xa);this._serverRequests.markMessagesSpam(za,ab);},_deleteMessages:function(wa,xa,ya){if(!xa.length)return;this._deleteIndividualMessages(wa,xa,ya);if(ya!==u.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(wa,xa);},_deleteIndividualMessages:function(wa,xa,ya){var za=xa.map(function(bb){return ka(this,bb).message_id;},this),ab=na(this,wa);ab.removeResources(za);this._emitReorderedChange(wa,ya);},_updateLocalMessage:function(wa){var xa=ka(this,wa.client_message_id),ya={};ya.status=wa.status;if(wa.status===n.SUCCESS||wa.error_data)ya.error_data=wa.error_data;var za=wa.message_id,ab=wa.client_message_id;if(this._messages.has(za)){this._updateMessage(za,xa,ya);return false;}if(wa.timestamp)ya.timestamp=wa.timestamp;if(wa.log_message_data)ya.log_message_data=wa.log_message_data;if(wa.ranges&&wa.ranges.length)ya.ranges=wa.ranges;if(wa.attachments&&wa.attachments.length){ya.raw_attachments=null;ya.attachments=wa.attachments;ta(this,ya,za);}this._localIdsMap[ab]=za;x.addServerID(ab,za);var bb=this._updateMessage(za,xa,ya);this._messages.set(ab,new k());if(sa(bb))this._localTitanMessagesCount[bb.thread_id]--;return true;},getNumberLocalMessages:function(wa){return this._localTitanMessagesCount[wa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(wa,xa){var ya=this._popPendingAttachmentMessage(wa,xa);this._serverRequests.sendNewMessage(ya);},_cancelAttachmentPlaceholder:function(wa,xa){var ya=this._popPendingAttachmentMessage(wa,xa);this._deleteIndividualMessages(ya.thread_id,[ya.message_id]);if(this._localTitanMessagesCount[ya.thread_id])this._localTitanMessagesCount[ya.thread_id]--;},_popPendingAttachmentMessage:function(wa,xa){var ya=this._uploadMessages[wa];ga(ya);ya.image_ids=xa.image_ids;ya.file_ids=xa.file_ids;ya.audio_ids=xa.audio_ids;ya.gif_ids=xa.gif_ids;ya.client_state=s.SEND_TO_SERVER;delete this._uploadMessages[wa];return ya;},_emitUpdatedChange:function(wa,xa,ya){this._didChange=true;this._threadInformer.updatedMessage(wa,xa,ya);},_emitReceivedChange:function(wa){this._didChange=true;this._threadInformer.receivedMessage(wa);},_emitReorderedChange:function(wa,xa){this._didChange=true;this._threadInformer.reorderedMessages(wa,xa);}});Object.assign(pa,v,{addListener:function(wa,xa){return ia.addListener(wa,xa);}});function qa(wa,xa){var ya=xa.map(ka.bind(null,wa));return ya.reverse();}function ra(wa,xa,ya){var za=ya.filter(function(ab){return sa(ka(wa,ab));});if(!wa._localTitanMessagesCount[xa])wa._localTitanMessagesCount[xa]=0;wa._localTitanMessagesCount[xa]+=za.length;}function sa(wa){var xa=wa.action_type;if(xa==o.USER_GENERATED_MESSAGE)return true;switch(wa.log_message_type){case r.SUBSCRIBE:case r.UNSUBSCRIBE:case r.SERVER_ERROR:case r.LIVE_LISTEN:return false;default:return true;}}function ta(wa,xa,ya){ya=ya||xa.message_id;var za=wa._attachmentData[ya];if(za){za.forEach(function(ab){var bb=xa.attachments.indexOf(ab.attach_key);if(bb!==-1)xa.attachments[bb]=ab.data;});delete wa._attachmentData[ya];}else if(!xa.is_forward&&ua(wa,xa)){wa._messagesNeedingAttachmentData[ya]=true;va(wa);}}function ua(wa,xa){if(!xa||!xa.attachments)return false;for(var ya=0;ya<xa.attachments.length;ya++){var za=xa.attachments[ya];if(typeof za==='string'&&za.indexOf(q.SHARE)===0)return true;}var ab=xa.forward_message_ids||[];for(ya=0;ya<ab.length;ya++){var bb=ka(wa,ab[ya]);if(ua(wa,bb))return true;}return false;}var va=fa(function(wa){var xa={};for(var ya in wa._messagesNeedingAttachmentData){var za=ka(wa,ya);if(ua(wa,za))xa[ya]=true;}var ab=Object.keys(xa);if(ab.length){var bb={message_ids:ab};if(wa._fbid!=i.getID())bb.request_user_id=wa._fbid;new g('/ajax/mercury/attachments/fetch_shares.php').setData(bb).setAllowCrossPageTransition(true).send();}wa._messagesNeedingAttachmentData={};},0,this);e.exports=pa;},null);
__d("MercuryChannelHandler",["Arbiter","ChannelConstants","MercuryActionType","MercuryGlobalActionType","MercuryMessages","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MercuryThreadInformer","MercuryViewer","MessagingEvent","MessagingReliabilityLogger","MessagingTag","PresenceUtil","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=v(n);for(var x in w)if(w.hasOwnProperty(x))z[x]=w[x];var y=w===null?null:w.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=w;function z(aa){"use strict";this.$MercuryChannelHandler0=aa;this.$MercuryChannelHandler1=m.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler2=o.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler3=k.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler4=[];}z.prototype.getInstanceFBID=function(){"use strict";return this.$MercuryChannelHandler0;};z.prototype.$MercuryChannelHandler5=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj||!ba.obj.message){r.addEntry('channel_receive','invalid_data');return;}var ca=ba.obj.message,da=ca.other_user_fbid?ca.other_user_fbid:ca.thread_fbid,ea={author:ca.mercury_author_id,author_email:ca.mercury_author_email,body:ca.body,subject:ca.subject,has_attachment:ca.has_attachment,attachments:ca.attachments,html_body:ca.html_body,thread_id:ca.tid,thread_fbid:ca.thread_fbid,other_user_fbid:ca.other_user_fbid,message_id:ca.mid,coordinates:ca.mercury_coordinates,is_spoof_warning:ca.is_spoof_warning,ranges:ca.ranges,source:ca.mercury_source,source_tags:ca.mercury_source_tags,threading_id:ca.threading_id,timestamp:ca.timestamp,timestamp_absolute:ca.timestamp_absolute,timestamp_relative:ca.timestamp_relative,timestamp_time_passed:ca.timestamp_time_passed,action_type:i.USER_GENERATED_MESSAGE,is_unread:ca.is_unread,is_forward:false,forward_count:ca.forward_count||ca.forward,forward_message_ids:ca.forward_msg_ids,location_text:ca.location_text,folder:ba.obj.folder};if("sync_id" in ca){ea.sync_id=ca.sync_id;}else ea.action_id=ca.action_id;var fa=[u({},ea)];fa=fa.concat(ca.forward_actions||[]);var ga=l.CLIENT_CHANNEL_MESSAGE;this.$MercuryChannelHandler1.handleUpdateWaitForThread({actions:fa,payload_source:ga},da);if(!ca.is_unread&&p.isViewer(ca.mercury_author_id)){var ha={};ha[da]=ba.obj.folder;this.$MercuryChannelHandler7(this.__getMessagingPayloadType(),{obj:{event:q.READ,thread_fbids:ca.thread_fbid?[ca.thread_fbid]:[],other_user_fbids:ca.other_user_fbid?[ca.other_user_fbid]:[],folder_info:ha,timestamp:ca.timestamp}});}r.addEntry('channel_receive','success',[da,ea.message_id,t.getSessionID()]);};z.prototype.$MercuryChannelHandler7=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=[],da=ba.obj.event==q.READ;(ba.obj.thread_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,thread_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});(ba.obj.other_user_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});this.$MercuryChannelHandler1.handleUpdate({actions:ca,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler8=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj||!(ba.obj.thread_fbids||ba.obj.other_user_fbids))return;var ca=[];(ba.obj.thread_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,thread_fbid:da});});(ba.obj.other_user_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,other_user_fbid:da});});this.$MercuryChannelHandler1.handleUpdate({actions:ca,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler9=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids)||!ba.obj.mids)return;var ca=ba.obj.thread_fbids.length?ba.obj.thread_fbids[0]:null,da=ba.obj.other_user_fbids.length?ba.obj.other_user_fbids[0]:null,ea={action_type:i.DELETE_MESSAGES,action_id:null,thread_fbid:ca,other_user_fbid:da,message_ids:ba.obj.mids};this.$MercuryChannelHandler1.handleUpdate({actions:[ea],threads:[ba.obj.updated_thread],payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandlera=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj||!ba.obj.folder)return;var ca={action_type:j.MARK_ALL_READ,action_id:ba.obj.action_id,folder:ba.obj.folder};this.$MercuryChannelHandler1.handleUpdate({global_actions:[ca]});};z.prototype.$MercuryChannelHandlerb=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=l.CLIENT_CHANNEL_MESSAGE;(ba.obj.thread_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:da,other_user_fbid:null,archived:ba.obj.state};this.$MercuryChannelHandler1.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ca},da);},this);(ba.obj.other_user_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:da,archived:ba.obj.state};this.$MercuryChannelHandler1.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ca},da);},this);};z.prototype.$MercuryChannelHandlerc=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=l.CLIENT_CHANNEL_MESSAGE,da;(ba.obj.thread_fbids||[]).forEach(function(ea){if(ba.obj.event==q.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?s.SPAM:s.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,thread_fbid:ea,other_user_fbid:null,new_folder:da};this.$MercuryChannelHandler1.handleUpdateWaitForThread({actions:[u({},fa)],payload_source:ca},ea);},this);(ba.obj.other_user_fbids||[]).forEach(function(ea){if(ba.obj.event==q.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?s.SPAM:s.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,other_user_fbid:ea,thread_fbid:null,new_folder:da};this.$MercuryChannelHandler1.handleUpdateWaitForThread({actions:[u({},fa)],payload_source:ca},ea);},this);};z.prototype.$MercuryChannelHandlerd=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj.tag)return;switch(ba.obj.tag){case s.ACTION_ARCHIVED:this.$MercuryChannelHandlerb(aa,ba);break;case s.INBOX:case s.OTHER:this.$MercuryChannelHandlerc(aa,ba);break;}};z.prototype.__markAsSeen=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlere(aa)||!ba.obj||!ba.obj.seen_timestamp)return;this.$MercuryChannelHandler1.handleUpdate({message_counts:[{seen_timestamp:ba.obj.seen_timestamp,folder:s.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:s.INBOX}],payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.__updateModelsFromMercuryPayload=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlerf(aa)||!ba.obj)return;this.$MercuryChannelHandler2.synchronizeInforms(function(){var ca=ba.obj,da=[];(ca.actions||[]).forEach(function(ea){var fa=i.USER_GENERATED_MESSAGE;if(ea.action_type==i.LOG_MESSAGE){var ga=l.CLIENT_CHANNEL_MESSAGE,ha;ha=ea.other_user_fbid||ea.thread_fbid;this.$MercuryChannelHandler1.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ga},ha);}else if(ea.action_type!=fa)da.push(ea);},this);ca.actions=da;ca.payload_source=l.CLIENT_CHANNEL_MESSAGE;this.$MercuryChannelHandler1.handleUpdate(ca);}.bind(this));};z.prototype.$MercuryChannelHandlerg=function(aa,ba){"use strict";this.$MercuryChannelHandler1.handleRoger(ba.obj);};z.prototype.$MercuryChannelHandlerh=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler6(aa)||!ba.obj||ba.obj.mute_settings===(void 0)||(!ba.obj.thread_fbid&&!ba.obj.other_user_fbid))return;var ca=i.CHANGE_MUTE_SETTINGS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,other_user_fbid:ba.obj.other_user_fbid,mute_settings:ba.obj.mute_settings}];this.$MercuryChannelHandler1.handleUpdate({actions:da,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.__handleMessagingPayload=function(aa,ba){"use strict";switch(ba.obj.event){case q.DELIVER:this.$MercuryChannelHandler5(aa,ba);break;case q.READ:case q.UNREAD:this.$MercuryChannelHandler7(aa,ba);break;case q.READ_ALL:this.$MercuryChannelHandlera(aa,ba);break;case q.DELETE:this.$MercuryChannelHandler8(aa,ba);break;case q.DELETE_MESSAGES:this.$MercuryChannelHandler9(aa,ba);break;case q.TAG:this.$MercuryChannelHandlerd(aa,ba);break;case q.REPORT_SPAM:this.$MercuryChannelHandlerc(aa,ba);break;case q.READ_RECEIPT:this.$MercuryChannelHandlerg(aa,ba);break;case q.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandlerh(aa,ba);break;}};z.prototype.getRouting=function(){"use strict";return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};z.prototype.__getMessagingPayloadType=function(){"use strict";return h.getArbiterType('messaging');};z.prototype.__getMercuryPayloadType=function(){"use strict";return h.getArbiterType('mercury');};z.prototype.__getInboxPayloadType=function(){"use strict";return h.getArbiterType('inbox');};z.prototype.$MercuryChannelHandler6=function(aa){"use strict";return (aa==this.__getMessagingPayloadType());};z.prototype.$MercuryChannelHandlerf=function(aa){"use strict";return (aa==this.__getMercuryPayloadType());};z.prototype.$MercuryChannelHandlere=function(aa){"use strict";return (aa==this.__getInboxPayloadType());};z.prototype.turnOn=function(){"use strict";if(!this.$MercuryChannelHandler4.length){var aa=this.getRouting();for(var ba in aa)this.$MercuryChannelHandler4.push(g.subscribe(h.getArbiterType(ba),aa[ba].bind(this)));}return this;};z.prototype.turnOff=function(){"use strict";if(this.$MercuryChannelHandler4.length){this.$MercuryChannelHandler4.forEach(g.unsubscribe);this.$MercuryChannelHandler4=[];}return this;};u(z,n);e.exports=z;},null);
__d("MercuryRoger",["Arbiter","ArbiterMixin","immutable","JSLogger","MercuryActionStatus","mapObject","MercuryServerRequests","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('MercuryServerRequests').get(),n=b('MercuryThreads').get(),o={},p=[],q=k.SUCCESS,r={getSeenBy:function(u,v){if(!u)return [];var w=[],x=o[u.thread_id];if(!x)return w;x.forEach(function(y,z){if(s(u,y,z,v))w.push(z);});return w;},wasSeenByAll:function(u){if(!u)return false;var v=o[u.thread_id];if(!v)return false;return v.every(function(w,x){return s(u,w,x);});},getSeenTimestamps:function(u){var v=o[u];if(!v){v=i.OrderedMap();o[u]=v;}return v;},getSeenTimestamp:function(u,v){var w=o[u];return w?w.get(v):null;}};Object.assign(r,h);function s(u,v,w,x){return !!(v>u.timestamp&&(u.status===(void 0)||u.status===q)&&(!x||w!=u.author));}m.subscribe('update-roger',function(u,v){for(var w in v){var x=o[w]||i.OrderedMap();x=x.withMutations(function(y){for(var z in v[w]){var aa=n.getThreadMetaNow(w);if(aa&&aa.participants)if(aa.participants.indexOf(z)==-1){p.push(t(o));continue;}var ba=y.get(z),ca=v[w][z];if(!ba||ca>ba)y.set(z,ca);}});o[w]=x.sort();}v&&r.inform('change',v);});g.subscribe(j.DUMP_EVENT,function(u,v){v.bad_read_receipts={receipts:p};});function t(u){return l(u,function(v){return v.toJS();});}e.exports=r;},null);
__d("MercuryDelayedRoger",["ArbiterMixin","LiveTimer","MercuryActionStatus","MercuryConfig","MercuryRoger","setTimeoutAcrossTransitions","MercuryMessages","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('MercuryMessages').get(),n=b('MercuryThreadInformer').get(),o=b('MercuryThreads').get(),p={},q={},r=j['roger.seen_delay'],s={getSeenBy:function(y,z){if(q[y])return [];return k.getSeenBy(t(y),z);},wasSeenByAll:function(y){if(q[y])return false;return k.wasSeenByAll(t(y));}};Object.assign(s,g);function t(y){if(!p[y]){var z=o.getThreadMetaNow(y);if(z)p[y]={thread_id:y,author:z.participants[0],timestamp:z.timestamp};}return p[y];}function u(y){var z=false;m.getThreadMessagesRange(y,0,1,function(aa){var ba=aa[0];if(!ba)return;var ca=ba.timestamp;if(ba.action_id||ba.status==i.SUCCESS)ca-=h.getServerTimeOffset();var da=s.getSeenBy(y);if(q[y]){clearTimeout(q[y]);delete q[y];}var ea=ca+r,fa=ea-Date.now();if(fa>0)q[y]=l(function(){delete q[y];v(y);},fa);p[y]=ba;var ga=s.getSeenBy(y);if(da.length||ga.length)z=true;});return z;}function v(y){var z={};z[y]=true;w(z);}function w(y){s.inform('state-changed',y);s.inform('change');}function x(event,y){var z={};for(var aa in y)if(u(aa))z[aa]=true;for(var ba in z){w(z);break;}}k.subscribe('change',function(y,z){for(var aa in z)!q[aa]&&v(aa);});n.subscribe('messages-received',x);n.subscribe('messages-reordered',x);n.subscribe('messages-updated',x);e.exports=s;},null);
__d("P2PActionConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CREDIT_CARDS_UPDATED:'credit_cards_updated',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined'};e.exports=g;},null);
__d("P2PDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("P2PActions",["P2PActionConstants","P2PDispatcher"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={updateCreditCards:function(j){h.dispatch({type:g.CREDIT_CARDS_UPDATED,data:j});},addCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_ADDED,data:j});},addCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_ADDED_ERROR,data:j});},updatePresetCreditCard:function(j){h.dispatch({type:g.PRESET_CREDIT_CARD_UPDATED,data:j});},updatePresetCreditCardError:function(j){h.dispatch({type:g.PRESET_CREDIT_CARD_UPDATED_ERROR,data:j});},updateCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_UPDATED,data:j});},updateCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_UPDATED_ERROR,data:j});},deleteCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_DELETED,data:j});},deleteCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_DELETED_ERROR,data:j});},verifyCreditCard:function(j){h.dispatch({type:g.CREDIT_CARD_VERIFIED,data:j});},verifyCreditCardError:function(j){h.dispatch({type:g.CREDIT_CARD_VERIFIED_ERROR,data:j});},updateTransfers:function(j){h.dispatch({type:g.TRANSFERS_UPDATED,data:j});},updateTransfersError:function(j){h.dispatch({type:g.TRANSFERS_UPDATED_ERROR,data:j});},transferAdded:function(j){h.dispatch({type:g.TRANSFER_ADDED,data:j});},transferAddedError:function(j){h.dispatch({type:g.TRANSFER_ADDED_ERROR,data:j});},transferUpdated:function(j){h.dispatch({type:g.TRANSFER_UPDATED,data:j});},transferUpdatedError:function(j){h.dispatch({type:g.TRANSFER_UPDATED_ERROR,data:j});},transferAccepted:function(){h.dispatch({type:g.TRANSFER_ACCEPTED});},transferDeclined:function(j){h.dispatch({type:g.TRANSFER_DECLINED,data:j});}};e.exports=i;},null);
__d("P2PAPIUtils",["CreditCardFormParam","fbt","guid","merge"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={genRequestID:function(){return 'id:'+i()+':'+Date.now();},getUncaughtErrorMessage:function(){return (h._("Se produjo un error. Vuelve a intentarlo m\u00e1s tarde."));},prepareCardMutationData:function(l){var m={},n=l[g.CARD_NUMBER].replace(/ /g,''),o=l[g.CARD_EXPIRATION].split('/');m[g.CARD_NUMBER]=n;m[g.MONTH]=o[0];m[g.YEAR]=o[1];m[g.CARD_EXPIRATION]={};m[g.CARD_EXPIRATION][g.MONTH]=m[g.MONTH];m[g.CARD_EXPIRATION][g.YEAR]=m[g.YEAR];return j(l,m);}};e.exports=k;},null);
__d("XP2PCreditCardDeleteController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_delete\/",{});},null);
__d("XP2PCreditCardUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_update\/",{});},null);
__d("XP2PCreditCardCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_create\/",{});},null);
__d("XP2PCreditCardsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/",{type:{type:"Int",defaultValue:1}});},null);
__d("XP2PPasswordProtectionStatusController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/",{});},null);
__d("XP2PPasswordProtectionStatusUpdateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/password_protection_status\/_update\/",{});},null);
__d("XP2PPresetCreditCardSetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/preset_credit_card\/_set\/",{});},null);
__d("XP2PTransactionsCreateController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_create\/",{});},null);
__d("XP2PTransactionsController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/",{since:{type:"Int"}});},null);
__d("XP2PTransactionsDeclineController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_decline\/",{});},null);
__d("XP2PTransactionsCancelController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transactions\/_cancel\/",{});},null);
__d("XP2PCreditCardVerifyController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/credit_cards\/_verify\/",{});},null);
__d("P2PAPI",["AsyncRequest","CreditCardFormParam","P2PActions","P2PAPIUtils","P2PPasswordProtectionParam","P2PPaymentCreditCardsTypes","P2PTransferParam","ImmutableObject","URI","XP2PCreditCardDeleteController","XP2PCreditCardUpdateController","XP2PCreditCardCreateController","XP2PCreditCardsController","XP2PPasswordProtectionStatusController","XP2PPasswordProtectionStatusUpdateController","XP2PPresetCreditCardSetController","XP2PTransactionsCreateController","XP2PTransactionsController","XP2PTransactionsDeclineController","XP2PTransactionsCancelController","XP2PCreditCardVerifyController","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca={getAllCreditCards:function(){var da=(s.getURIBuilder()).getURI();new g().setData({type:l.SENDING}).setURI(da).setMethod('GET').setReadOnly(true).setHandler(function(ea){var fa=ea.getPayload();if(!fa.error)i.updateCreditCards(fa);}.bind(this)).send();},createTransaction:function(da){var ea=(w.getURIBuilder()).getURI(),fa={},ga=da.formData,ha=da.success||ba,ia=da.error||ba;fa[h.CREDENTIAL_ID]=ga[h.CREDENTIAL_ID];fa.amount=ga.amount;fa.receiver_id=ga.receiverId;fa.offline_threading_id=j.genRequestID();new g().setData(fa).setMethod('POST').setURI(ea).setHandler(function(ja){var ka=ja?ja.getPayload():{};if(ka.error){ia(ka.error);}else{ha(ka);this.getAllCreditCards();}}.bind(this)).setErrorHandler(function(){ia({message:j.getUncaughtErrorMessage()});}.bind(this)).send();},addCreditCard:function(da){var ea=(r.getURIBuilder()).getURI().getPath(),fa=o('/ajax/payment/token_proxy.php').addQueryData('tpe',ea);da=j.prepareCardMutationData(da);var ga=new n(da);new g().setData(da).setMethod('POST').setURI(fa).setHandler(function(ha){var ia=ha.getPayload(),ja={};if(!ia.errors){ja[h.CREDENTIAL_ID]=ia[h.CARD_FBID];ja.isPreset=ia.isPreset;ja.isVerified=ia.isVerified;ja.passwordProtection=ia.passwordProtection;ga=n.set(ga,ja);i.addCreditCard(ga);}else i.addCreditCardError(Object.assign({requestID:ga.requestID},ia));}.bind(this)).setErrorHandler(function(){i.addCreditCardError({requestID:ga.requestID,errors:{general:{message:j.getUncaughtErrorMessage()}}});}.bind(this)).send();},getTransactions:function(da){da=da||{};var ea={},fa=da,ga=(x.getURIBuilder()).getURI(),ha=new n(fa);if(fa.since)ea.since=fa.since;return new g().setData(ea).setURI(ga).setMethod('GET').setReadOnly(true).setHandler(function(ia){var ja=ia.getPayload();if(!ja.error){i.updateTransfers(ja);}else i.updateTransfersError(Object.assign({requestID:ha.requestID},ja));}.bind(this)).setErrorHandler(function(){i.updateTransfersError({error:{message:j.getUncaughtErrorMessage()},requestID:ha.requestID});}.bind(this)).send();},updatePresetCreditCard:function(da){var ea=(v.getURIBuilder()).getURI();new g().setData(da).setURI(ea).setMethod('POST').setHandler(function(fa){var ga=fa.getPayload();if(!ga.error){i.updatePresetCreditCard(Object.assign({},ga,{requestID:da.requestID}));i.transferAccepted();}else i.updatePresetCreditCardError(Object.assign({},ga,{requestID:da.requestID}));}.bind(this)).setErrorHandler(function(){i.updatePresetCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:da.requestID});}.bind(this)).send();},updateCreditCard:function(da){var ea=(q.getURIBuilder()).getURI().getPath(),fa=o('/ajax/payment/token_proxy.php').addQueryData('tpe',ea);da=j.prepareCardMutationData(da);var ga=new n(da);new g().setData(da).setMethod('POST').setURI(fa).setHandler(function(ha){var ia=ha.getPayload();if(!ia.errors){i.updateCreditCard(ga);}else i.updateCreditCardError(Object.assign({},ia,{requestID:ga.requestID}));}.bind(this)).setErrorHandler(function(){i.updateCreditCardError({errors:{general:{message:j.getUncaughtErrorMessage()}},requestID:ga.requestID});}.bind(this)).send();},deleteCreditCard:function(da){var ea=(p.getURIBuilder()).getURI();new g().setData(da).setMethod('POST').setURI(ea).setHandler(function(fa){var ga=fa.getPayload();if(!ga.error){i.deleteCreditCard(Object.assign({},ga,{requestID:da.requestID}));}else i.deleteCreditCardError(Object.assign({},ga,{requestID:da.requestID}));}.bind(this)).setErrorHandler(function(){i.deleteCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:da.requestID});}.bind(this)).send();},getPasswordProtectionSetting:function(da){var ea=(t.getURIBuilder()).getURI(),fa=da.success||ba,ga=da.error||ba;new g().setURI(ea).setMethod('GET').setReadOnly(true).setHandler(function(ha){var ia=ha?ha.getPayload():[];if(ia.error){ga();}else fa(ia);}.bind(this)).setErrorHandler(function(){ga();}.bind(this)).send();},setPasswordProtectionSetting:function(da){var ea=(u.getURIBuilder()).getURI(),fa=da.formData,ga=da.success||ba,ha=da.error||ba,ia={};ia[k.STATUS]=fa[k.STATUS];new g().setData(ia).setURI(ea).setMethod('POST').setHandler(function(ja){var ka=ja?ja.getPayload():{};if(ka.error){ha(ka.error);}else ga();}.bind(this)).setErrorHandler(function(){ha();}.bind(this)).send();},declineTransaction:function(da){var ea=(y.getURIBuilder()).getURI(),fa=da.formData,ga=da.success||ba,ha=da.error||ba,ia={};ia[m.TRANSFER_ID]=fa[m.TRANSFER_ID];new g().setData(ia).setURI(ea).setMethod('POST').setHandler(function(ja){var ka=ja?ja.getPayload():{},la={};if(ka.error){ha(ka.error);}else{ga();la[m.TRANSFER_ID]=ia[m.TRANSFER_ID];i.transferDeclined(la);}}.bind(this)).setErrorHandler(function(){ha();}.bind(this)).send();},cancelTransaction:function(da){var ea=(z.getURIBuilder()).getURI(),fa=da.formData,ga=da.success||ba,ha=da.error||ba,ia={};ia[m.TRANSFER_ID]=fa[m.TRANSFER_ID];new g().setData(ia).setURI(ea).setMethod('POST').setHandler(function(ja){var ka=ja?ja.getPayload():{};if(ka.error){ha(ka.error);}else ga();}.bind(this)).setErrorHandler(function(){ha();}.bind(this)).send();},verifyCreditCard:function(da){var ea=(aa.getURIBuilder()).getURI().getPath(),fa=o('/ajax/payment/token_proxy.php').addQueryData('tpe',ea);new g().setData(da).setMethod('POST').setURI(fa).setHandler(function(ga){var ha=ga.getPayload();if(!ha.error){i.verifyCreditCard(Object.assign({},ha,{requestID:da.requestID}));}else i.verifyCreditCardError(Object.assign({},ha,{requestID:da.requestID}));}.bind(this)).setErrorHandler(function(){i.verifyCreditCardError({error:{message:j.getUncaughtErrorMessage()},requestID:da.requestID});}.bind(this)).send();}};e.exports=ca;},null);
__d("P2PCreditCardFormFieldMixin.react",["React","ReactInputSelection","XUITextInput.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=49,m=g,n=m.PropTypes,o={propTypes:{onChange:n.func,reference:n.string,saveError:n.string,focused:n.bool,value:n.string,isMasked:n.bool,showFocusOutline:n.bool,showIcon:n.bool,showPlaceholder:n.bool},getDefaultProps:function(){return {onChange:k,saveError:'',focused:false,value:'',isMasked:false,showFocusOutline:true,showIcon:true,showPlaceholder:true};},getInitialState:function(){return {isValid:null,value:'',oldValue:'',focused:false,lastKeyCode:l,modified:false,cursorPosition:0,errorMessage:null};},getInputElement:function(){return this.refs.ccFormFieldInput.refs.textInput.getTextFieldDOM();},restoreCursorPosition:function(){if(!this.getUpdatedCursorPosition)return;if(this.state.oldValue===this.state.value)return;var p=this.getUpdatedCursorPosition(this.state.value,this.state.oldValue,this.state.cursorPosition);h.setSelection(this.getInputElement(),{start:p});},setAndValidate:function(p,q){var r,s=this.state.value,t=h.getSelection(this.getInputElement()),u=this.formatValue?this.formatValue(p,s,q):p;r=this.validate(u);this.setState({modified:true,value:u,oldValue:p,isValid:r,cursorPosition:t.start},this.restoreCursorPosition);this.triggerChange(u,r);},triggerChange:function(p,q){this.props.onChange(this.props.reference,p,q);},componentDidMount:function(){if(this.props.focused)setTimeout(function(){if(this.isMounted())this.focus();}.bind(this),100);this.initializeFormValue();},initializeFormValue:function(){var p;if(this.props.value){p=this.props.isMasked?true:this.validate(this.props.value);this.setState({isValid:p,modified:true,value:this.props.value});this.triggerChange(this.props.value,p);}},handleBlur:function(p){var q=this.getInputElement().value;if(q&&q!==this.state.value)this.setAndValidate(q,l);this.setState({focused:false});},handlePaste:function(p){this.setState({lastKeyCode:l});},handleChange:function(p){this.setAndValidate(p.target.value,this.state.lastKeyCode);},handleOnKeyDown:function(p){var q=p.keyCode;if(q>=96&&q<=105)q=q-48;this.setState({lastKeyCode:q});},handleFocus:function(p){this.setState({focused:true});},focus:function(){g.findDOMNode(this.refs.ccFormFieldInput).focus();},shouldShowIsValidError:function(){if(!this.state.isValid&&this.state.modified)return !this.state.focused||this.isValAtLimit();return false;},isDisabled:function(){return this.props.isMasked;},render:function(){var p=this.shouldShowIsValidError()||this.props.saveError||this.state.errorMessage;return (g.createElement("div",{className:(("_2wac")+(p?' '+"_5bqn":'')+(this.props.showFocusOutline&&!p&&this.state.focused?' '+"_5bqo":'')),onClick:this.focus},this.props.showIcon?this.getIcon():null,g.createElement(i,{autoComplete:this.getAutocompleteName(),ref:"ccFormFieldInput",defaultValue:this.props.defaultValue,value:this.state.value,onChange:this.handleChange,onPaste:this.handlePaste,onKeyDown:this.handleOnKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,placeholder:this.props.showPlaceholder?this.getPlaceholder():'',disabled:this.isDisabled(),className:(("_5bqq")+(!this.props.showIcon?' '+"_46tf":'')),xuiError:this.state.errorMessage}),g.createElement("div",{className:"_5br4"})));}};e.exports=o;},null);
__d("P2PCreditCardNumberFormFieldHelper",["Keys"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={formatCardNumber:function(i,j,k,l,m){if(k===g.BACKSPACE||k===g.DELETE){var n=(j.split(m).length-1),o=(i.split(m).length-1);if(o!==n)return i;}i=i.replace(/\D/g,'');i=i.substr(0,l[l.length-1]);var p='';for(var q=1;q<l.length;q++){if(l[q]>i.length||(q===l.length-1)){p+=i.slice(l[q-1]);break;}p+=i.slice(l[q-1],l[q])+m;}return p;},getUpdatedCursorPosition:function(i,j,k,l){var m=0,n=0;while(m<k&&m<j.length&&n<i.length)if(j[m]===i[n]){m++;n++;}else if(!/^\d+$/.test(j[m])){m++;}else n++;if(i.substr(n,1)===l)n++;return n;}};e.exports=h;},null);
__d("P2PCreditCardExpDateFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardExpDateFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _31_x"}));},getAutocompleteName:function(){return 'cc-exp';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return (j._("MM\/AA"));},formatValue:function(l,m,n){var o=this.getLimit(),p=String.fromCharCode(n);l=l.replace(/[^0-9\/]+/g,'');var q=l.split('/'),r=q[0],s=q[1];if(s&&s.length===4){l=r+'/'+s.substr(-2);}else l=l.slice(0,o);if(!/^\d+$/.test(p)&&n!==191&&n!==111)return l;l=l.replace(/\D/g,'');if(/^\d$/.test(l)&&(l!=='0'&&l!=='1')){l='0'+l+'/';}else if(l.length>=2&&l.indexOf('/')===-1)l=l.substr(0,2)+'/'+l.substr(2,4);return l;},validate:function(l){var m=l.split('/'),n=(new Date()),o=parseInt(n.getFullYear().toString().substring(2),10),p=parseInt(n.getMonth()+1,10),q=parseInt(m[0],10),r=parseInt(m[1],10);if(l.length!==5||!q||!r||isNaN(q)||isNaN(r)||q<1||q>12)return false;if((r<o)||(r===o&&q<p)||q>12||q<1)return false;return true;}});e.exports=k;},null);
__d("P2PCreditCardCVCFormField.react",["CreditCardFormParam","React","P2PCreditCardFormFieldMixin.react","PaymentMethodUtils","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=h.createClass({displayName:"P2PCreditCardCVCFormField",mixins:[i],getIcon:function(){return (h.createElement("div",{className:"_31_w _5wcr"}));},getAutocompleteName:function(){return 'cc-csc';},isValAtLimit:function(){var n=this.state.value;return n.length===this.getLimit();},getLimit:function(){var n,o=this.props.cscMaxLength;if(!o){n=j.getCardType(this.props[g.CARD_NUMBER]);o=n.name==='amex'?4:3;}return o;},formatValue:function(n,o,p){var q=this.getLimit();n=n.replace(/\D/g,'');n=n.slice(0,q);return n;},getPlaceholder:function(){return l._("CSC");},validate:function(n){return n.length===this.getLimit();}});e.exports=m;},null);
__d("P2PCreditCardZipCodeFormField.react",["React","P2PCreditCardFormFieldMixin.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g.createClass({displayName:"P2PCreditCardZipCodeFormField",mixins:[h],getIcon:function(){return (g.createElement("div",{className:"_31_w _3oce"}));},getAutocompleteName:function(){return 'postal-code';},isValAtLimit:function(){var l=this.state.value;return l.length===this.getLimit();},getLimit:function(){return 5;},getPlaceholder:function(){return j._("C\u00f3digo postal de facturaci\u00f3n");},formatValue:function(l,m,n){var o=this.getLimit();l=l.replace(/\D/g,'');l=l.slice(0,o);return l;},validate:function(l){return l.length===this.getLimit();}});e.exports=k;},null);
__d("P2PErrorDialog.react",["React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=g,q=p.PropTypes,r=g.createClass({displayName:"P2PErrorDialog",propTypes:{allowBack:q.bool,onBackClick:q.func,onOKClick:q.func,error:q.object,title:q.string},getDefaultProps:function(){return {allowBack:false,onBackClick:n,onOKClick:n,error:null,title:o._("Problema")};},handleBackButtonClick:function(){this.props.onBackClick();},handleOKButtonClick:function(){this.props.onOKClick();},renderBackButton:function(){var s=null;if(this.props.allowBack)s=g.createElement(h,{label:o._("Atr\u00e1s"),onClick:this.handleBackButtonClick,use:"default"});return s;},renderErrorContent:function(){var s=this.props.error;if(s.message.__html){return g.createElement("span",{dangerouslySetInnerHTML:s.message});}else return g.createElement("span",null,s.message);},render:function(){return (g.createElement(i,{layerHideOnBlur:false,shown:true,width:300},g.createElement(m,{showCloseButton:false},this.props.title),g.createElement(j,null,this.renderErrorContent()),g.createElement(k,null,this.renderBackButton(),g.createElement(l,{action:"cancel",onClick:this.handleOKButtonClick,use:"default"}))));}});e.exports=r;},null);
__d("P2PErrorNotice.react",["React","XUINotice.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PErrorNotice",propTypes:{error:k.object},getDefaultProps:function(){return {error:null};},renderErrorContent:function(){var m=this.props.error;if(m.message.__html){return g.createElement("span",{dangerouslySetInnerHTML:m.message});}else return g.createElement("span",null,m.message);},render:function(){return (g.createElement(h,{className:"_3-8n",use:"warn"},this.renderErrorContent()));}});e.exports=l;},null);
__d("P2PCreditCardForm.react",["CreditCardFormParam","KappaWrapper","React","P2PCreditCardNumberFormField.react","P2PCreditCardExpDateFormField.react","P2PCreditCardCVCFormField.react","P2PCreditCardZipCodeFormField.react","P2PErrorDialog.react","P2PErrorNotice.react","ReactLayeredComponentMixin","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();'use strict';var u=i,v=u.PropTypes,w=i.createClass({displayName:"P2PCreditCardForm",mixins:[p],propTypes:{cscMaxLength:v.number,editMode:v.bool,onErrorDialogOKClick:v.func,onValidation:v.func,prefilledFormData:v.object,rendersErrorDialog:v.bool,saveErrors:v.object},getDefaultProps:function(){return {cscMaxLength:null,editMode:false,onErrorDialogOKClick:r,onValidation:r,prefilledFormData:{},rendersErrorDialog:false,saveErrors:null};},getInitialState:function(){var x={};x[g.CARD_NUMBER]={};x[g.CARD_NUMBER].valid=false;x[g.CARD_NUMBER].value=this.props.prefilledFormData[g.CARD_NUMBER]||'';x[g.CARD_EXPIRATION]={};x[g.CARD_EXPIRATION].valid=false;x[g.CARD_EXPIRATION].value=this.props.prefilledFormData[g.CARD_EXPIRATION]||'';x[g.CSC]={};x[g.CSC].valid=false;x[g.CSC].value=this.props.prefilledFormData[g.CSC]||'';x[g.ZIP]={};x[g.ZIP].valid=false;x[g.ZIP].value=this.props.prefilledFormData[g.ZIP]||'';return {isValid:false,fields:x};},componentWillMount:function(){h.start(6,3,0);},handleFormValueChange:function(x,y,z){var aa=this.state.fields;aa[x]={valid:z,value:y};this.validateForm();},validateForm:function(){var x=true,y=this.state.fields;x=!t(y).some(function(z){return !z.valid;});this.setState({isValid:x});this.props.onValidation(x,this.serializeFormFields());},serializeFormFields:function(){var x=this.state.fields,y={};for(var z in x)if(x.hasOwnProperty(z))y[z]=x[z].value;return y;},getSaveError:function(x){var y='',z=this.props.saveErrors;if(z&&z.fields&&z.fields[x])y=z.fields[x].message;return y;},isCreditCardNumberMasked:function(){return this.props.editMode;},isCreditCardNumberFocused:function(){return !this.props.editMode;},isExpFocused:function(){return this.props.editMode;},renderGeneralError:function(){var x=this.getGeneralError();if(!x)return;return (i.createElement(o,{error:x}));},getGeneralError:function(){if(this.props.saveErrors&&this.props.saveErrors.general)return this.props.saveErrors.general;return null;},handleErrorOKClick:function(){this.props.onErrorDialogOKClick();},renderLayers:function(){var x=this.getGeneralError();if(!this.props.rendersErrorDialog||!x)return {};return {errorMessageDialog:i.createElement(n,{error:x,onOKClick:this.handleErrorOKClick,title:s._("Problema al guardar la tarjeta")})};},render:function(){return (i.createElement("form",{className:"_3bez"},!this.props.rendersErrorDialog?this.renderGeneralError():null,i.createElement("div",{className:"_2xxs _2xxt"},i.createElement(j,{reference:g.CARD_NUMBER,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CARD_NUMBER),value:this.state.fields[g.CARD_NUMBER].value,isMasked:this.isCreditCardNumberMasked(),focused:this.isCreditCardNumberFocused()})),i.createElement("div",{className:"_2xxs _2xxu"},i.createElement(k,{reference:g.CARD_EXPIRATION,focused:this.isExpFocused(),onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CARD_EXPIRATION),value:this.state.fields[g.CARD_EXPIRATION].value}),i.createElement(l,{reference:g.CSC,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.CSC),cscMaxLength:this.props.cscMaxLength,creditCardNumber:this.state.fields[g.CARD_NUMBER].value,value:this.state.fields[g.CSC].value})),i.createElement("div",{className:"_2xxs _2xxv"},i.createElement(m,{reference:g.ZIP,onChange:this.handleFormValueChange,saveError:this.getSaveError(g.ZIP),value:this.state.fields[g.ZIP].value}))));}});e.exports=w;},null);
__d("P2PCreditCard",["CreditCardFormParam","CreditCardTypeEnum","PaymentMethodUtils","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={visa:{image:k('/images/payments/icons/visa.png'),imageLarge:k('/images/payments/icons/visa-lg.png'),name:'Visa'},mc:{image:k('/images/payments/icons/mc.png'),imageLarge:k('/images/payments/icons/mc-lg.png'),name:'MasterCard'},disc:{image:k('/images/payments/icons/disc.png'),imageLarge:k('/images/payments/icons/disc-lg.png'),name:'Discover'},jcb:{image:k('/images/payments/icons/jcb.png'),imageLarge:k('/images/payments/icons/jcb-lg.png'),name:'JCB'},amex:{image:k('/images/payments/icons/amex.png'),imageLarge:k('/images/payments/icons/amex-lg.png'),name:'American Express'},unknown:{image:k('/images/brands/credit_card/credit_32.png'),imageLarge:k('/images/brands/credit_card/credit_32.png'),name:j._("Tipo de tarjeta desconocido")}};function m(n){this.setCredentialId(n[g.CREDENTIAL_ID]);this.setCardType(n[g.CARD_TYPE]);this.setCreditCardNumber(n[g.CARD_NUMBER]);this.setSelected(n.selected);this.setZipCode(n[g.ZIP]);this.setCSC(n[g.CSC]);this.setExp(n[g.CARD_EXPIRATION]);this.setIsPreset(n.isPreset);this.setIsVerified(n.isVerified);this.setIsMobileVerified(n.isMobileVerified);}m.prototype.getCreditCardNumber=function(){return this[g.CARD_NUMBER];};m.prototype.setCreditCardNumber=function(n){n=n.replace(/ /g,'');this.setCardProviderProps(this[g.CARD_TYPE],n);n=n.substr(n.length-4);this[g.CARD_NUMBER]=n;};m.prototype.setCardProviderProps=function(n,o){var p=this.$P2PCreditCard0(n,o);if(l[p]){this.setImage(l[p].image);this.setImageLarge(l[p].imageLarge);this.setName(l[p].name);}};m.prototype.getExp=function(){return this[g.CARD_EXPIRATION];};m.prototype.getExpFormatted=function(){var n=this[g.CARD_EXPIRATION];return n?n[g.MONTH]+'/'+n[g.YEAR]:'';};m.prototype.getExpFormattedShort=function(){var n=this[g.CARD_EXPIRATION],o='';if(n&&n[g.MONTH]&&n[g.YEAR]){o=n[g.MONTH]+'/';if(n[g.YEAR].length===4){o+=n[g.YEAR].substr(2);}else o+=n[g.YEAR];}return o;};m.prototype.setExp=function(n){if(n&&n[g.MONTH].length===1)n[g.MONTH]='0'+n[g.MONTH];this[g.CARD_EXPIRATION]=n;};m.prototype.getCSC=function(){return this[g.CSC];};m.prototype.setCSC=function(n){this[g.CSC]=n;};m.prototype.getZipCode=function(){return this[g.ZIP];};m.prototype.setZipCode=function(n){this[g.ZIP]=n;};m.prototype.getSelected=function(){return this.$P2PCreditCard1;};m.prototype.setSelected=function(n){this.$P2PCreditCard1=n;};m.prototype.getCardType=function(){return this[g.CARD_TYPE];};m.prototype.setCardType=function(n){this[g.CARD_TYPE]=n;this.setCardProviderProps(n,this[g.CARD_NUMBER]);};m.prototype.getCredentialId=function(){return this[g.CREDENTIAL_ID];};m.prototype.setCredentialId=function(n){this[g.CREDENTIAL_ID]=n;};m.prototype.$P2PCreditCard0=function(n,o){var p='default',q,r;if(n){q=Object.keys(h).filter(function(s){return h[s]===n;})[0];p=this.$P2PCreditCard2(q);}else if(o){r=i.getCardType(o);if(r)p=r.name;}return p;};m.prototype.getImage=function(){return this.$P2PCreditCard3||l.unknown.image;};m.prototype.setImage=function(n){this.$P2PCreditCard3=n;};m.prototype.getImageLarge=function(){return this.$P2PCreditCard4||l.unknown.imageLarge;};m.prototype.setImageLarge=function(n){this.$P2PCreditCard4=n;};m.prototype.getName=function(){return this.$P2PCreditCard5||l.unknown.name;};m.prototype.setName=function(n){this.$P2PCreditCard5=n;};m.prototype.getIsPreset=function(){return this.$P2PCreditCard6;};m.prototype.setIsPreset=function(n){this.$P2PCreditCard6=n||false;};m.prototype.$P2PCreditCard2=function(n){switch(n){case 'VISA':n='visa';break;case 'AMERICANEXPRESS':n='amex';break;case 'MASTERCARD':n='mc';break;case 'DISCOVER':n='disc';break;case 'JCB':n='jcb';break;default:n='unknown';break;}return n;};m.prototype.getCreditCardNumberFormatted=function(){return '*'+this[g.CARD_NUMBER];};m.prototype.getCreditCardNumberMask=function(){return '**** **** **** '+this[g.CARD_NUMBER];};m.prototype.getMaxCSCLength=function(){var n=this.$P2PCreditCard0(this[g.CARD_TYPE],this[g.CARD_NUMBER]);return n==='amex'?4:3;};m.prototype.getIsVerified=function(){return this.$P2PCreditCard7||false;};m.prototype.setIsVerified=function(n){this.$P2PCreditCard7=n;};m.prototype.getIsMobileVerified=function(){return this.$P2PCreditCard8||false;};m.prototype.setIsMobileVerified=function(n){this.$P2PCreditCard8=n;};e.exports=m;},null);
__d("P2PChooseCreditCardForm.react",["Image.react","P2PCreditCard","React","XUIRadioList.react","XUIGrayText.react","cx","emptyFunction","fbt","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=j.Item,q=i,r=q.PropTypes,s='add_debit_card',t=i.createClass({displayName:"P2PChooseCreditCardForm",propTypes:{creditCards:r.arrayOf(r.instanceOf(h)),selectedCard:r.instanceOf(h).isRequired},getDefaultProps:function(){return {creditCards:[],selectedCard:null,onChange:m,onAddDebitCardOptionSelected:m,showAddDebitCardOption:false};},getInitialState:function(){return {selectedCard:this.props.selectedCard};},getSelectedCard:function(){return this.state.selectedCard;},onChange:function(u){var v;if(u===s){this.props.onAddDebitCardOptionSelected();}else{v=this.props.creditCards.filter(function(w){return w.getCredentialId()===u;})[0];this.setState({selectedCard:v});this.props.onChange(v);}},renderCardItem:function(u,v){return (i.createElement(p,{className:"_2x6n",key:'item-'+v,value:u.getCredentialId()},i.createElement(k,{className:"_3-8r",shade:"dark",weight:"bold"},u.getName()),i.createElement(k,{shade:"dark",weight:"normal"},u.getCreditCardNumberFormatted()),i.createElement(g,{className:"_2x6p",height:24,src:u.getImage(),width:36})));},renderAddDebitCardRadioItem:function(){return (i.createElement(p,{className:"_2x6n _1gri",key:'item-'+this.props.creditCards.length,value:s},i.createElement(k,{className:"_3-8r",shade:"dark",weight:"bold"},n._("Agregar una tarjeta de d\u00e9bito"))));},getRadioListItems:function(){var u=this.props.creditCards,v=u.map(this.renderCardItem);if(this.props.showAddDebitCardOption)v.push(this.renderAddDebitCardRadioItem());return v;},render:function(){return (i.createElement(j,{selectedValue:this.state.selectedCard.getCredentialId(),className:o(this.props.className,"_2x6r"),onValueChange:this.onChange},this.getRadioListItems()));}});e.exports=t;},null);
__d("P2PLoadingMask.react",["React","XUISpinner.react","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g,k=j.PropTypes,l=g.createClass({displayName:"P2PLoadingMask",propTypes:{visible:k.bool},getDefaultProps:function(){return {visible:false};},render:function(){if(!this.props.visible)return null;return (g.createElement("div",{className:"_3de"},g.createElement(h,{background:"dark",size:"large",className:"_3df"}),g.createElement("div",{className:"_3dg"})));}});e.exports=l;},null);
__d("P2PVerifyCreditCardDialog.react",["CreditCardFormParam","P2PAPI","P2PAPIUtils","P2PCreditCard","P2PErrorNotice.react","P2PLoadingMask.react","React","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","P2PCreditCardCVCFormField.react","P2PCreditCardZipCodeFormField.react","XUICloseButton.react","XUIDialogTitle.react","cx","emptyFunction","fbt","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=m,aa=z.PropTypes,ba=m.createClass({displayName:"P2PVerifyCreditCardDialog",propTypes:{asyncRequestState:aa.object,creditCard:aa.instanceOf(j),onCancel:aa.func,onConfirm:aa.func,isSending:aa.bool},getDefaultProps:function(){return {asyncRequestState:{},creditCard:null,isSending:true,onCancel:w,onError:w,onSuccess:w};},getInitialState:function(){var ca={};ca[g.CSC]={};ca[g.CSC].valid=false;if(this.shouldShowZIPInput()){ca[g.ZIP]={};ca[g.ZIP].valid=false;}return {isValid:false,loading:false,requestID:'',saveError:null,fields:ca};},componentWillReceiveProps:function(ca){var da=ca.asyncRequestState?ca.asyncRequestState[this.state.requestID]:null;if(da){this.setState({requestID:''});if(da.error){this.handleOnSaveError(da.error);}else this.handleOnSaveSuccess(da);}},handleOnSaveSuccess:function(ca){this.props.onSuccess(ca);},handleOnSaveError:function(ca){this.setState({loading:false,saveError:ca});},clearSaveError:function(){this.setState({saveError:null});},handleCancelClick:function(){this.props.onCancel();},handleConfirmClick:function(){var ca={},da=i.genRequestID();ca[g.CREDENTIAL_ID]=this.props.creditCard.getCredentialId();ca[g.CSC]=this.state.fields[g.CSC].value;if(this.state.fields[g.ZIP])ca[g.ZIP]=this.state.fields[g.ZIP].value;this.clearSaveError();this.setState({loading:true,requestID:da});h.verifyCreditCard(Object.assign({requestID:da},ca));},handleFormValueChange:function(ca,da,ea){var fa=this.state.fields;fa[ca].value=da;fa[ca].valid=ea;this.setState({fields:fa});this.validateForm();},validateForm:function(){var ca=true,da=this.state.fields;ca=!y(da).some(function(ea){return !ea.valid;});this.setState({isValid:ca});},handleCloseButtonClick:function(){this.props.onCancel();},shouldShowZIPInput:function(){var ca=!!(this.props.creditCard.getZipCode());return !ca;},renderError:function(){var ca;if(this.state.saveError)ca=m.createElement(k,{error:this.state.saveError});return ca;},componentDidUpdate:function(){setTimeout(function(){try{if(this.isMounted())this.refs.dialog&&this.refs.dialog.layer.updatePosition();}catch(ca){}}.bind(this));},renderCVCFormField:function(){return (m.createElement(r,{cscMaxLength:this.props.creditCard.getMaxCSCLength(),focused:true,onChange:this.handleFormValueChange,reference:'csc',showIcon:false,showPlaceholder:false,showFocusOutline:false}));},renderZIPFormField:function(){return (m.createElement(s,{onChange:this.handleFormValueChange,reference:'zip',showIcon:false,showPlaceholder:false,showFocusOutline:false}));},getMessage:function(){var ca=this.props.creditCard.getName(),da=this.props.creditCard.getCreditCardNumber();if(this.props.isSending){if(this.shouldShowZIPInput()){return (x._("Ingresa el c\u00f3digo de seguridad que figura en el dorso de la tarjeta {credit card issuer} que termina en {credit card number last 4 digits} y el c\u00f3digo postal de facturaci\u00f3n para enviar este pago.",[x.param("credit card issuer",ca),x.param("credit card number last 4 digits",da)]));}else return (x._("Para enviar este pago, ingresa el c\u00f3digo de seguridad que figura en el dorso de tu tarjeta {credit card issuer} que termina en {credit card number last 4 digits}.",[x.param("credit card issuer",ca),x.param("credit card number last 4 digits",da)]));}else if(this.shouldShowZIPInput()){return (x._("Ingresa el c\u00f3digo de seguridad que figura en el dorso de la tarjeta {credit card issuer} que termina en {credit card number last 4 digits} y el c\u00f3digo postal de facturaci\u00f3n para aceptar este pago.",[x.param("credit card issuer",ca),x.param("credit card number last 4 digits",da)]));}else return (x._("Para aceptar este pago, ingresa el c\u00f3digo de seguridad que figura en el dorso de tu tarjeta {credit card issuer} que termina en {credit card number last 4 digits}.",[x.param("credit card issuer",ca),x.param("credit card number last 4 digits",da)]));},getInputs:function(){var ca,da=m.createElement("div",{className:"_3yfa"},m.createElement("div",{className:"_197h"},x._("C\u00f3digo de seguridad")),m.createElement("div",{className:"_197i"},this.renderCVCFormField()));if(this.shouldShowZIPInput())ca=m.createElement("div",{className:"_3yfb"},m.createElement("div",{className:"_197h"},x._("C\u00f3digo postal de facturaci\u00f3n")),m.createElement("div",{className:"_197i"},this.renderZIPFormField()));return (m.createElement("div",null,da,ca));},render:function(){return (m.createElement(o,{layerHideOnBlur:false,ref:"dialog",shown:true,width:300},m.createElement(u,{showCloseButton:false},x._("Ingresa el c\u00f3digo de seguridad"),m.createElement(t,{onClick:this.handleCloseButtonClick})),m.createElement(p,null,m.createElement("div",{className:"_197f"},this.getMessage()),this.renderError(),m.createElement("div",{className:"_197g"},this.getInputs())),m.createElement(q,null,m.createElement(n,{label:x._("Confirmar"),onClick:this.handleConfirmClick,disabled:!this.state.isValid,use:"confirm"})),m.createElement(l,{visible:this.state.loading})));}});e.exports=ba;},null);
__d("P2PAcceptMoneyDialog.react",["CreditCardFormParam","Image.react","Link.react","P2PCreditCardForm.react","P2PAPI","P2PAPIUtils","P2PChooseCreditCardForm.react","P2PCreditCard","P2PErrorDialog.react","P2PErrorNotice.react","P2PLinkConstants","P2PLoadingMask.react","P2PLogger","P2PPasswordProtectionNUXDialog.react","P2PPasswordProtectionStatusTypes","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PTransferParam","P2PVerifyCreditCardDialog.react","React","XUIButton.react","XUIDialog.react","XUICloseButton.react","XUIDialogTitle.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIText.react","XUIGrayText.react","cx","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){b.__markCompiled&&b.__markCompiled();'use strict';var na=z,oa=na.PropTypes,pa='fbP2PAcceptMoneyDialog_learnMoreSentenceID',qa=z.createClass({displayName:"P2PAcceptMoneyDialog",propTypes:{asyncRequestState:oa.object,creditCards:oa.arrayOf(oa.instanceOf(n)).isRequired,onClose:oa.func,transfer:oa.object},getDefaultProps:function(){return {asyncRequestState:{},onClose:ka,creditCards:[]};},getInitialState:function(){return {addCreditCardRequestID:'',isValid:false,declineErrorObject:null,formData:{},loading:false,passwordNUXPending:false,passwordProtectionNUXDialogShown:false,presetRequestID:'',presetSaveErrorObject:null,saveErrors:null,selectedCard:this.props.creditCards[0],showConfirmation:false,showDeclineConfirmation:false,showChooseCreditCardForm:this.props.creditCards.length>0,verifyCreditCardDialogShown:false};},log:function(ra,sa){s.log(ra,Object.assign({www_event_flow:w.UI_FLOW_P2P_RECEIVE,object_id:this.props.transfer[x.TRANSFER_ID]},sa));},componentWillMount:function(){this.log(v.UI_ACTN_INITIATE_ADD_CARD);},componentWillReceiveProps:function(ra){var sa=ra.asyncRequestState,ta=sa?sa[this.state.addCreditCardRequestID]:null,ua=sa?sa[this.state.presetRequestID]:null;if(ta){this.setState({addCreditCardRequestID:''});if(ta.error){this.handleAcceptAddCardError(ta.error);}else this.handleAcceptAddCardSuccess(ta);}else if(ua){this.setState({presetRequestID:''});if(ua.error){this.handleUpdatePresetCreditCardError(ua.error);}else this.handleUpdatePresetCreditCardSuccess(ua);}},onBlur:function(){this.props.onClose();},handleAddCardBackButtonClick:function(){this.setState({isValid:false,formData:{},presetSaveErrorObject:null,saveErrors:null,showChooseCreditCardForm:true});},handleAcceptWithCardButtonClick:function(){this.log(v.UI_ACTN_ACCEPT_WITH_CARD);if(!this.state.selectedCard.getIsVerified()){this.setState({verifyCreditCardDialogShown:true});return;}this.acceptWithSelectedCard();},acceptWithSelectedCard:function(){this.setState({presetSaveErrorObject:null,loading:true});this.updatePresetCreditCard(this.state.selectedCard.getCredentialId());},onVerifyCreditCardSuccess:function(){this.setState({verifyCreditCardDialogShown:false},function(){this.acceptWithSelectedCard();}.bind(this));},onVerifyCreditCardCancel:function(){this.setState({verifyCreditCardDialogShown:false});},handleAddDebitCardOptionClicked:function(){this.setState({presetSaveErrorObject:null,showChooseCreditCardForm:false});},handleDeclineCardBackButtonClick:function(){this.setState({showDeclineConfirmation:false});},handleDeclineCardSubmitButtonClick:function(){var ra={};this.setState({loading:true,declineErrorObject:null});ra[x.TRANSFER_ID]=this.props.transfer[x.TRANSFER_ID];k.declineTransaction({formData:ra,success:this.handleDeclineSuccess,error:this.handleDeclineError});},handleDeclineSuccess:function(){this.props.onClose();},handleDeclineError:function(ra){this.setState({loading:false,declineErrorObject:ra});},handleNoDebitCardClick:function(){if(!this.state.loading)this.setState({showDeclineConfirmation:true});},handleAcceptAddCardClick:function(){var ra=l.genRequestID();this.setState({addCreditCardRequestID:ra,loading:true,presetSaveErrorObject:null,saveErrors:null});this.log(v.UI_ACTN_CONFIRM_CARD_DETAILS);k.addCreditCard(Object.assign({requestID:ra},this.state.formData));},handleAcceptAddCardSuccess:function(ra){this.updatePresetCreditCard(ra[g.CREDENTIAL_ID]);this.log(v.UI_ACTN_ADD_CARD_SUCCESS);},handleAcceptAddCardError:function(ra){this.setState({loading:false,saveErrors:ra});this.log(v.UI_ACTN_ADD_CARD_FAIL,{message:ra&&ra.general?ra.general.message:''});},updatePresetCreditCard:function(ra){var sa={},ta=l.genRequestID();sa[g.CREDENTIAL_ID]=ra;this.setState({presetRequestID:ta});k.updatePresetCreditCard(Object.assign({},sa,{requestID:ta}));},handleUpdatePresetCreditCardSuccess:function(ra){this.setState({loading:false,showConfirmation:true,passwordNUXPending:ra.passwordProtection===u.NOT_SET});},handleUpdatePresetCreditCardError:function(ra){this.setState({loading:false,presetSaveErrorObject:ra});},handleValidation:function(ra,sa){this.setState({isValid:ra,formData:sa});},handleConfirmationOKClick:function(){if(this.state.passwordNUXPending){this.setState({passwordNUXPending:false,passwordProtectionNUXDialogShown:true});}else this.props.onClose();},handleCloseButtonClick:function(){this.props.onClose();this.log(v.UI_ACTN_CANCEL_ADD_CARD);},handleErrorBackClick:function(){this.setState({declineErrorObject:null});},handleErrorOKClick:function(){this.setState({declineErrorObject:null});this.props.onClose();},handlePasswordProtectionNUXComplete:function(){this.setState({passwordProtectionNUXDialogShown:false});this.props.onClose();},handleCreditCardSelected:function(ra){this.setState({selectedCard:ra});},renderChooseCreditCardForm:function(){return (z.createElement("div",{className:"_2_t"},z.createElement(da,{showCloseButton:false},la._("Agregar una tarjeta de d\u00e9bito"),z.createElement(ca,{onClick:this.handleCloseButtonClick})),z.createElement(ea,{className:"_2_u"},z.createElement(ha,{display:"block",size:"small",className:"_2_w"},la._("Vincula una tarjeta de d\u00e9bito para enviar y recibir dinero.")),this.renderPresetError(),z.createElement(m,{className:"_2pij",creditCards:this.props.creditCards,onAddDebitCardOptionSelected:this.handleAddDebitCardOptionClicked,onChange:this.handleCreditCardSelected,ref:"choose_credit_card_form",selectedCard:this.state.selectedCard,showAddDebitCardOption:true})),z.createElement(fa,null,z.createElement(aa,{disabled:this.state.loading,label:la._("Aceptar"),onClick:this.handleAcceptWithCardButtonClick,size:"medium",use:"confirm"}))));},renderPresetError:function(){var ra;if(this.state.presetSaveErrorObject)ra=z.createElement(p,{error:this.state.presetSaveErrorObject});return ra;},renderAcceptMoney:function(){var ra=this.props.transfer,sa,ta=z.createElement(aa,{disabled:this.state.loading||!this.state.isValid,label:la._("Aceptar"),onClick:this.handleAcceptAddCardClick,size:"medium",use:"confirm"});if(this.props.creditCards.length===0){sa=z.createElement(fa,{leftContent:z.createElement(i,{className:"_2__",href:"#",onClick:this.handleNoDebitCardClick},la._("Rechazar pago"))},ta);}else sa=z.createElement(fa,null,z.createElement(aa,{disabled:this.state.loading,label:la._("Atr\u00e1s"),onClick:this.handleAddCardBackButtonClick,size:"medium",use:"default"}),ta);return (z.createElement("div",{className:"_1p_r"},z.createElement(da,{showCloseButton:false},la._("Agregar una tarjeta de d\u00e9bito"),z.createElement(ca,{onClick:this.handleCloseButtonClick})),z.createElement(ea,null,z.createElement("div",{className:"_1p_v _3-97"},z.createElement(ha,{display:"block",size:"small",className:"_3-94"},la._("{sender_name} te envi\u00f3 {amount} {currency}. Agrega una tarjeta de d\u00e9bito para aceptar el dinero.",[la.param("sender_name",ra.sender.name),la.param("currency",ra.currency),la.param("amount",ra.amount)]))),z.createElement("div",{className:"_1p_w"},this.renderPresetError(),z.createElement(j,{onValidation:this.handleValidation,saveErrors:this.state.saveErrors})),z.createElement(ia,{display:"block",id:pa,shade:"medium",size:"small"},la._("Tu informaci\u00f3n de pago se guardar\u00e1 de forma segura. {Link to P2P learn more page.}",[la.param("Link to P2P learn more page.",z.createElement(i,{"aria-describedby":pa,href:q.addDebitCardHelpURI,target:"_blank"},la._("M\u00e1s informaci\u00f3n.")))]))),sa));},renderDeclineConfirmation:function(){var ra=this.props.transfer;return (z.createElement("div",{className:"_301"},z.createElement(da,{showCloseButton:false},la._("\u00bfRechazar pago?"),z.createElement(ca,{onClick:this.handleCloseButtonClick})),z.createElement(ea,null,z.createElement(ia,{display:"block",shade:"medium",size:"small"},la._("Si se rechaza este pago, el dinero se devolver\u00e1 a {friendName}.",[la.param("friendName",ra.sender.name)]))),z.createElement(fa,null,z.createElement(aa,{disabled:this.state.loading,label:la._("Atr\u00e1s"),onClick:this.handleDeclineCardBackButtonClick,size:"medium",use:"default"}),z.createElement(aa,{disabled:this.state.loading,label:la._("Rechazar"),onClick:this.handleDeclineCardSubmitButtonClick,size:"medium",use:"default"}))));},renderConfirmation:function(){return (z.createElement("div",{className:"_1p_-"},z.createElement(da,{showCloseButton:false},la._("Pago recibido")),z.createElement(ea,null,z.createElement("div",{className:"_1q00"},z.createElement(h,{height:50,width:50,src:ma("/images/p2p/check_mark-sm.png")})),z.createElement(ia,{display:"block",size:"small",shade:"dark"},la._("El dinero que recibas a partir de ahora se acreditar\u00e1 autom\u00e1ticamente en esta tarjeta. Puedes actualizar los datos de tu tarjeta en la {Link with text that goes to settings page}.",[la.param("Link with text that goes to settings page",z.createElement(i,{target:"_blank",href:q.settingsWWWURI},la._("Configuraci\u00f3n de pagos")))]))),z.createElement(fa,null,z.createElement(ga,{action:"cancel",use:"default",onClick:this.handleConfirmationOKClick}))));},componentDidUpdate:function(){setTimeout(function(){try{if(this.isMounted())this.refs.dialog&&this.refs.dialog.layer.updatePosition();}catch(ra){}}.bind(this));},render:function(){var ra;if(this.state.verifyCreditCardDialogShown){return (z.createElement(y,{creditCard:this.state.selectedCard,asyncRequestState:this.props.asyncRequestState,isSending:false,onCancel:this.onVerifyCreditCardCancel,onSuccess:this.onVerifyCreditCardSuccess}));}else if(this.state.declineErrorObject){return (z.createElement(o,{ref:"decline_error",allowBack:true,onBackClick:this.handleErrorBackClick,onOKClick:this.handleErrorOKClick,error:this.state.declineErrorObject,title:la._("Problema al rechazar el pago")}));}else if(this.state.passwordProtectionNUXDialogShown)return (z.createElement(t,{onComplete:this.handlePasswordProtectionNUXComplete}));if(this.state.showConfirmation){ra=this.renderConfirmation();}else if(this.state.showDeclineConfirmation){ra=this.renderDeclineConfirmation();}else if(this.state.showChooseCreditCardForm){ra=this.renderChooseCreditCardForm();}else ra=this.renderAcceptMoney();return (z.createElement(ba,{className:"_309",layerHideOnBlur:false,ref:"dialog",shown:true,width:300},ra,z.createElement(r,{ref:"send_money_dialog_loader",visible:this.state.loading})));}});e.exports=qa;},null);
__d("P2PCreditCardStore",["P2PActionConstants","CreditCardFormParam","EventEmitter","ImmutableObject","P2PAPI","P2PCreditCard","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n,o,p,q,r;function s(x,y){if(x)r[x]=new j(y);}function t(x,y){if(x)r[x]={error:y};}for(var u in i)if(i.hasOwnProperty(u))w[u]=i[u];var v=i===null?null:i.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=i;function w(){i.call(this);p=false;q=false;n=[];r={};o=m.register(this.onEventDispatched.bind(this));}w.prototype.onEventDispatched=function(x){var y=x.data,z=x.type;switch(z){case g.CREDIT_CARDS_UPDATED:this.handleCreditCardsUpdated(y);this.emit('change');break;case g.CREDIT_CARD_ADDED:this.handleCreditCardAdded(y);this.emit('change');break;case g.CREDIT_CARD_ADDED_ERROR:this.handleCreditCardAddedError(y);this.emit('change');break;case g.CREDIT_CARD_DELETED:this.handleCreditCardDeleted(y);this.emit('change');break;case g.CREDIT_CARD_DELETED_ERROR:this.handleCreditCardDeletedError(y);this.emit('change');break;case g.CREDIT_CARD_UPDATED:this.handleCreditCardUpdated(y);this.emit('change');break;case g.CREDIT_CARD_UPDATED_ERROR:this.handleCreditCardUpdatedError(y);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED:this.handlePresetCreditCardUpdated(y);this.emit('change');break;case g.PRESET_CREDIT_CARD_UPDATED_ERROR:this.handlePresetCreditCardUpdatedError(y);this.emit('change');break;case g.CREDIT_CARD_VERIFIED:this.handleCreditCardVerified(y);this.emit('change');break;case g.CREDIT_CARD_VERIFIED_ERROR:this.handleCreditCardVerifiedError(y);this.emit('change');break;}};w.prototype.getAsyncRequestState=function(){return r;};w.prototype.isCreditCardsFetchComplete=function(){return p;};w.prototype.handleCreditCardsUpdated=function(x){p=true;n=x.map(function(y){return new l(y);});};w.prototype.handleCreditCardAdded=function(x){var y=false;s(x.requestID,x);n.forEach(function(z){if(z.getCredentialId()===x[h.CREDENTIAL_ID])y=true;});if(y)return;n.push(new l(x));};w.prototype.handleCreditCardAddedError=function(x){t(x.requestID,x.errors);};w.prototype.handleCreditCardDeleted=function(x){var y=x[h.CARD_FBID];s(x.requestID,x);n=n.filter(function(z){return z.getCredentialId()!==y;});};w.prototype.handleCreditCardDeletedError=function(x){t(x.requestID,x.error);};w.prototype.handleCreditCardUpdated=function(x){s(x.requestID,x);n.forEach(function(y,z){if(y.getCredentialId()===x[h.CREDENTIAL_ID]){y.setExp(x[h.CARD_EXPIRATION]);y.setZipCode(x[h.ZIP]);}});};w.prototype.handleCreditCardUpdatedError=function(x){t(x.requestID,x.errors);};w.prototype.handlePresetCreditCardUpdated=function(x){var y=x[h.CARD_FBID];s(x.requestID,x);var z=n.filter(function(ba){return ba.getIsPreset();})[0];if(z)z.setIsPreset(false);var aa=n.filter(function(ba){return ba.getCredentialId()===y;})[0];if(aa)aa.setIsPreset(true);};w.prototype.handlePresetCreditCardUpdatedError=function(x){t(x.requestID,x.error);};w.prototype.handleCreditCardVerified=function(x){s(x.requestID,x);n.forEach(function(y,z){if(y.getCredentialId()===x[h.CREDENTIAL_ID])y.setIsVerified(true);});};w.prototype.handleCreditCardVerifiedError=function(x){t(x.requestID,x.error);};w.prototype.getAll=function(){if(!q){q=true;k.getAllCreditCards();}return n;};w.prototype.getAllSettingsEligible=function(){var x=this.getAll();return x.filter(function(y){return y.getIsVerified()||y.getIsMobileVerified();});};w.prototype.getPresetCard=function(){var x=this.getAll();return x.filter(function(y){return y.getIsPreset();})[0];};e.exports=new w();},null);
__d("P2PNUXRendererUtils",["MercuryConstants","CurrentUser","ImmutableObject","MercuryAttachmentType","P2PTransferParam","P2PTransferStatus","StoryAttachmentStyle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.MercurySupportedShareType,o={getTransferFromMessage:function(p){var q,r;if(!p||!p.attachments||!p.attachments.length)return;r=p.attachments[0];if(this.isShareAttachment(r)){q=r.share.target;}else if(r.share_data_type===n.FB_ORION)q=r.metadata;if(q)q=new i(q);return q;},isShareAttachment:function(p){return !!(typeof p!=='string'&&p.attach_type==j.SHARE&&p.share&&p.share.style_list&&p.share.style_list.indexOf(m.ORION)>=0);},isValidNUXMessage:function(p){var q=this.getTransferFromMessage(p);return !!(q&&q&&q.receiver&&q.receiver.id===h.getID()&&(q[k.STATUS]===l.PENDING_RECIPIENT_NUX||q[k.STATUS]===l.PENDING_RECIPIENT_VERIFICATION||q[k.STATUS]===l.PENDING_PUSH_FAIL));}};e.exports=o;},null);
__d("P2PTransferStore",["Arbiter","P2PActionConstants","ChannelConstants","CreditCardFormParam","CurrentUser","EventEmitter","ImmutableObject","P2PActions","P2PAPI","P2PChannelType","P2PCreditCard","P2PDispatcher","P2PNUXRendererUtils","P2PTransferParam","P2PTransferStatus","MercuryThreadInformer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();'use strict';var v=b('MercuryThreadInformer').get(),w,x,y,z,aa,ba,ca,da,ea,fa=null;function ga(la,ma){if(la)ea[la]=new m(ma);}function ha(la,ma){if(la)ea[la]={error:ma};}for(var ia in l)if(l.hasOwnProperty(ia))ka[ia]=l[ia];var ja=l===null?null:l.prototype;ka.prototype=Object.create(ja);ka.prototype.constructor=ka;ka.__superConstructor__=l;function ka(){l.call(this);w=false;y=[];ea={};aa=g.subscribe(i.getArbiterType(p.TRANSFER_STATUS_CHANGED),this.handleChannelTransferStatusChanged.bind(this));ba=v.subscribe('messages-received',this.handleMessageReceived.bind(this));ca=v.subscribe('messages-updated',this.handleMessageUpdated.bind(this));z=r.register(this.onEventDispatched.bind(this));}ka.prototype.onEventDispatched=function(la){var ma=la.data,na=la.type;switch(na){case h.TRANSFERS_UPDATED:this.handleTransfersUpdated(ma);this.emit('change');break;case h.TRANSFERS_UPDATED_ERROR:this.handleTransfersUpdatedError(ma);this.emit('change');break;case h.TRANSFER_ADDED:this.handleTransferAdded(ma);this.emit('change');break;case h.TRANSFER_UPDATED:this.handleTransferUpdated(ma);this.emit('change');break;case h.TRANSFER_ACCEPTED:this.handleTransferAccepted();this.emit('change');break;case h.TRANSFER_DECLINED:this.handleTransferDeclined(ma);this.emit('change');break;}};ka.prototype.getAsyncRequestState=function(){return ea;};ka.prototype.handleTransfersUpdated=function(la){da=null;y=la.map(function(ma){var na={};if(ma.creditCard){na[j.CREDENTIAL_ID]=ma.creditCard[j.CREDENTIAL_ID];na[j.CARD_NUMBER]=ma.creditCard[j.CARD_NUMBER];na[j.CARD_TYPE]=ma.creditCard[j.CARD_TYPE];ma.creditCard=new q(na);}return new m(ma);});};ka.prototype.handleTransfersUpdatedError=function(la){da=la.error;ha(la.requestID,la.error);};ka.prototype.handleTransferAdded=function(la){var ma=null;ga(la.requestID,la);ma=y.filter(function(na){return (na[t.TRANSFER_ID]===la[t.TRANSFER_ID]);})[0];if(ma)return;y.push(new m(la));y=y.sort(function(na,oa){return oa.creationTime-na.creationTime;});};ka.prototype.handleTransferAddedError=function(la){ha(la.requestID,la.errors);};ka.prototype.handleChannelTransferStatusChanged=function(la,ma){ma=ma.obj;n.transferUpdated(ma);};ka.prototype.getPendingMessageAttachment=function(){return fa;};ka.prototype.handleMessageReceived=function(la,ma){for(var na in ma)if(ma.hasOwnProperty(na)){var oa=ma[na];for(var pa=0;pa<oa.length;pa++)if(oa[pa].attachments&&oa[pa].attachments.length){fa=oa[pa];return;}}};ka.prototype.handleMessageUpdated=function(la,ma){if(!fa)return;for(var na in ma)if(ma.hasOwnProperty(na)){var oa=ma[na];for(var pa in oa)if(oa.hasOwnProperty(pa)&&fa.message_id===pa){var qa=s.getTransferFromMessage(fa);if(qa){n.transferAdded(qa);fa=null;return;}}}};ka.prototype.handleTransferUpdated=function(la){for(var ma=0,na=y.length;ma<na;ma++)if(y[ma][t.TRANSFER_ID]===la[t.TRANSFER_ID])y[ma]=m.set(y[ma],la);};ka.prototype.handleTransferAccepted=function(){var la;for(var ma=0,na=y.length;ma<na;ma++)if(y[ma][t.STATUS]===u.PENDING_RECIPIENT_NUX){la={};la[t.STATUS]=u.COMPLETED;y[ma]=m.set(y[ma],la);}};ka.prototype.handleTransferDeclined=function(la){var ma;for(var na=0,oa=y.length;na<oa;na++)if(y[na][t.TRANSFER_ID]===la[t.TRANSFER_ID]&&y[na][t.STATUS]===u.PENDING_RECIPIENT_NUX){ma={};ma[t.STATUS]=u.CANCELED_DECLINED;y[na]=m.set(y[na],ma);break;}};ka.prototype.handleTransferUpdatedError=function(la){ha(la.requestID,la.errors);};ka.prototype.getTransferByID=function(la){return y.filter(function(ma){return la===ma[t.TRANSFER_ID];})[0];};ka.prototype.getAll=function(la){if(!w){w=true;o.getTransactions(la);}return y;};ka.prototype.getNUXTransfer=function(){var la=y.filter(function(na){var oa=na[t.STATUS];return ((oa===u.PENDING_RECIPIENT_NUX||oa===u.PENDING_RECIPIENT_VERIFICATION||oa===u.PENDING_PUSH_FAIL)&&na.sender.id!==k.getID());})[0];if(!la&&!x&&!w){x=true;var ma=(new Date());o.getTransactions({since:Math.round((ma.setDate(ma.getDate()-15))/1000)});}return la;};ka.prototype.hasTransfers=function(){return y.length>0;};ka.prototype.hasReceivedFromSender=function(la){for(var ma=0,na=y.length;ma<na;ma++)if(y[ma].sender.id===la)return true;return false;};ka.prototype.getTransferFetchError=function(){return da;};e.exports=new ka();},null);
__d("P2PVerificationFlowHelper",["AsyncDialog","AsyncRequest","P2PAPI","P2PTransferParam","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=null,m=null,n=null,o={startVerificationFlow:function(p,q,r){l=p;m=q;n=r||k;g.send(new h('/p2p/verify/dialog/?id='+p));},setupFlowExitHandler:function(p,q,r,s){var t=function(w){n(w);l=null;m=null;n=null;p.destroy();q.destroy();};if(r){p.subscribe('hide',function(){t(s);});}else{var u=false,v=false;p.subscribe('confirm',function(){u=true;});p.subscribe('hide',function(){if(u){p.destroy();q.destroy();}else if(m){q.show();}else t(false);});q.subscribe('confirm',function(){v=true;var w={};w[j.TRANSFER_ID]=l;i.cancelTransaction({formData:w});t(false);});q.subscribe('hide',function(){if(!v)p.show();});}}};e.exports=o;},null);
__d("P2PNUXRenderer.react",["Image.react","Layout.react","Link.react","P2PAcceptMoneyDialog.react","P2PActions","P2PCreditCardStore","P2PLinkConstants","P2PQEValues","P2PNUXRendererUtils","P2PTransferStatus","P2PTransferParam","P2PTransferStore","P2PVerificationFlowHelper","React","ReactLayeredComponentMixin","XUIButton.react","XUIGrayText.react","XUINotice.react","cx","emptyFunction","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();'use strict';var ca=h.FillColumn,da=h.Column,ea=t,fa=ea.PropTypes,ga=t.createClass({displayName:"P2PNUXRenderer",mixins:[u],propTypes:{message:fa.object,emptyFunction:fa.func,onImageLoad:fa.func,type:fa.oneOf(['chat','jewel','messages','settingsNUX','settingsReceiverRisk','settingsPushFail']).isRequired},getDefaultProps:function(){return {message:null,onImageLoad:z,type:''};},getInitialState:function(){var ha={creditCardAsyncRequestState:{},creditCards:[],acceptMoneyDialogShown:false,enabled:false};if(this.props.message){var ia=o.getTransferFromMessage(this.props.message),ja=r.getTransferByID(ia[q.TRANSFER_ID]);if(!ja){k.transferAdded(ia);ha.transfer=ia;}else ha.transfer=ja;}else ha.transfer=r.getNUXTransfer();if(ha.transfer)ha.creditCardAsyncRequestState=l.getAsyncRequestState(),ha.creditCards=l.getAll();return ha;},onCreditCardStoreChange:function(){this.setState({creditCardAsyncRequestState:l.getAsyncRequestState(),creditCards:l.getAll()});},onTransferStoreChange:function(){var ha=this.state.transfer?r.getTransferByID(this.state.transfer[q.TRANSFER_ID]):null,ia={};ia.transfer=this.props.message&&ha?ha:r.getNUXTransfer();if(ia.transfer)ia.creditCardAsyncRequestState=l.getAsyncRequestState(),ia.creditCards=l.getAll();this.setState(ia,function(){this.props.onImageLoad(t.findDOMNode(this));}.bind(this));},componentDidMount:function(){this.creditCardStoreSub=l.addListener('change',this.onCreditCardStoreChange);this.transferStoreSub=r.addListener('change',this.onTransferStoreChange);},componentWillUnmount:function(){this.unsubscribeAll();},statics:{isValidNUXMessage:function(ha){return o.isValidNUXMessage(ha);}},unsubscribeAll:function(){this.unsubscribeCreditCardStoreEvent();this.unsubscribeTransferStoreEvent();},unsubscribeCreditCardStoreEvent:function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null;}},unsubscribeTransferStoreEvent:function(){if(this.transferStoreSub){this.transferStoreSub.remove();this.transferStoreSub=null;}},handleAcceptMoneyDialogClose:function(){this.setState({acceptMoneyDialogShown:false});},handleGetStartedClick:function(){this.setState({acceptMoneyDialogShown:true});},handleGoToConfirmClicked:function(){s.startVerificationFlow(this.state.transfer[q.TRANSFER_ID],false);},render:function(){var ha=!!(this.state.transfer&&l.isCreditCardsFetchComplete()),ia;if(this.state.transfer)ia=this.state.transfer[q.STATUS];if(this.props.type==='chat'||this.props.type==='messages'){return (t.createElement("div",{className:"_3kw-"},ha?this.renderMessage():null));}else if(this.props.type==='jewel'){return (t.createElement("div",{className:"_3kw_"},ha?this.renderJewel():null));}else if(this.props.type==='settingsReceiverRisk'){return (t.createElement("div",{className:"_cu5"},ha&&ia===p.PENDING_RECIPIENT_VERIFICATION?this.renderSettingsReceiverRisk():null));}else if(this.props.type==='settingsNUX'){return (t.createElement("div",{className:"_4z2f"},ha&&ia===p.PENDING_RECIPIENT_NUX?this.renderSettingsNUX():null));}else if(this.props.type==='settingsPushFail')return (t.createElement("div",{className:"_4b82"},ha&&ia===p.PENDING_PUSH_FAIL?this.renderSettingsPushFail():null));},renderMessage:function(){var ha;ha=this.state.transfer[q.STATUS];if(ha===p.PENDING_RECIPIENT_VERIFICATION){return this.renderMessageRisk();}else if(ha===p.PENDING_RECIPIENT_NUX){return this.renderMessageNUX();}else if(ha===p.PENDING_PUSH_FAIL)return this.renderMessagePushFail();},renderJewel:function(){var ha;ha=this.state.transfer[q.STATUS];if(ha===p.PENDING_RECIPIENT_VERIFICATION){return this.renderJewelRisk();}else if(ha===p.PENDING_RECIPIENT_NUX){return this.renderJewelNUX();}else if(ha===p.PENDING_PUSH_FAIL)return this.renderJewelPushFail();},renderMessageRisk:function(){return (t.createElement("div",{className:(("_3kx0")+(this.props.type==='chat'?' '+"_3-8r":''))},t.createElement(h,{className:"_3kxb"},t.createElement(da,{className:"_3kxc"},t.createElement(g,{height:32,src:ba('/images/p2p/receiver-risk-inthread.png'),width:32})),t.createElement(ca,{className:"_3kxd"},t.createElement("div",{className:"_3kxe"},aa._("Confirma tus datos")),t.createElement("div",{className:"_3kxf"},aa._("Para aceptar el dinero que te envi\u00f3 {sender_name}, confirma tus datos.",[aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement("div",null,t.createElement(v,{use:"default",size:"medium",label:aa._("Confirmar datos"),onClick:this.handleGoToConfirmClicked}))))));},renderMessagePushFail:function(){return (t.createElement("div",{className:(("_3kx0")+(this.props.type==='chat'?' '+"_3-8r":''))},t.createElement(h,{className:"_3kxb"},t.createElement(da,{className:"_3kxc"},t.createElement(g,{height:32,src:ba('/images/p2p/receiver-risk-inthread.png'),width:32})),t.createElement(ca,{className:"_3kxd"},t.createElement("div",{className:"_3kxe"},aa._("Actualiza tu tarjeta")),t.createElement("div",{className:"_3kxf"},aa._("Parece que tu tarjeta caduc\u00f3 o no es v\u00e1lida. Actual\u00edzala para recibir {amount} {currency} de {sender_name}.",[aa.param("currency",this.state.transfer.currency),aa.param("amount",this.state.transfer.amount),aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement("div",null,t.createElement(v,{use:"default",size:"medium",label:aa._("Actualizar tarjeta"),href:m.settingsWWWURI,target:"_blank"}))))));},renderMessageNUX:function(){var ha=n.ReceiverInThreadNUXBodyText||aa._("Agrega una tarjeta de d\u00e9bito para aceptarlo.");return (t.createElement("div",{className:(("_3kx0")+(this.props.type==='chat'?' '+"_3-8r":''))},t.createElement(h,{className:"_3kxb"},t.createElement(da,{className:"_3kxc"},t.createElement(g,{height:32,src:ba('/images/p2p/receiver-nux-inthread.png'),width:32})),t.createElement(ca,{className:"_3kxd"},t.createElement("div",{className:"_3kxe"},aa._("{sender_name} te envi\u00f3 dinero.",[aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement("div",{className:"_3kxf"},ha),t.createElement("div",null,t.createElement(v,{use:"default",size:"medium",label:aa._("Agregar tarjeta"),onClick:this.handleGetStartedClick}))))));},renderJewelRisk:function(){return (t.createElement("div",{className:"_3kxg",onClick:this.handleGoToConfirmClicked},t.createElement(h,null,t.createElement(da,{className:"_3kxh"},t.createElement(g,{className:"_547r",height:28,src:ba("/images/p2p/receiver-risk-notification.png"),width:28})),t.createElement(ca,{className:"_2pic"},t.createElement(w,{display:"block",shade:"medium",weight:"bold"},aa._("Confirma tus datos")),t.createElement(w,{display:"block",shade:"medium"},aa._("Para aceptar el dinero que te envi\u00f3 {sender_name}, confirma tus datos.",[aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement(w,{className:"_3kxj",display:"block"},aa._("Confirmar datos"))))));},renderJewelPushFail:function(){return (t.createElement("div",{className:"_3kxg"},t.createElement(h,null,t.createElement(da,{className:"_3kxh"},t.createElement(g,{className:"_547r",height:28,src:ba("/images/p2p/receiver-risk-notification.png"),width:28})),t.createElement(ca,{className:"_2pic"},t.createElement(w,{display:"block",shade:"medium",weight:"bold"},aa._("Actualiza tu tarjeta")),t.createElement(w,{display:"block",shade:"medium"},aa._("Parece que tu tarjeta caduc\u00f3 o no es v\u00e1lida. Actual\u00edzala para recibir {amount} {currency} de {sender_name}.",[aa.param("currency",this.state.transfer.currency),aa.param("amount",this.state.transfer.amount),aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement(i,{href:m.settingsWWWURI,target:"_blank"},t.createElement(w,{className:"_3kxj",display:"block"},aa._("Actualizar tarjeta")))))));},renderJewelNUX:function(){return (t.createElement("div",{className:"_3kxg",onClick:this.handleGetStartedClick},t.createElement(h,null,t.createElement(da,{className:"_3kxh"},t.createElement(g,{className:"_547r",height:28,src:ba("/images/p2p/receiver-nux-notification.png"),width:28})),t.createElement(ca,{className:"_2pic"},t.createElement(w,{display:"block",shade:"medium",weight:"bold"},aa._("Aceptar {amount} {currency} de {sender_name}",[aa.param("currency",this.state.transfer.currency),aa.param("amount",this.state.transfer.amount),aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement(w,{display:"block",shade:"medium"},this.getTimeBasedNUXMessageBody()),t.createElement(w,{className:"_3kxj",display:"block"},aa._("Agregar tarjeta"))))));},renderSettingsReceiverRisk:function(){return (t.createElement("div",{className:"_cu8"},t.createElement(x,{use:"warn"},t.createElement(w,{className:"_3-95",display:"block",shade:"medium"},aa._("Para aceptar el dinero que te envi\u00f3 {sender_name}, confirma tus datos.",[aa.param("sender_name",this.state.transfer.sender.name)])),t.createElement(v,{label:aa._("Confirmar datos"),onClick:this.handleGoToConfirmClicked}))));},renderSettingsPushFail:function(){return (t.createElement("div",{className:"_cu8"},t.createElement(x,{use:"warn"},t.createElement(w,{className:"_3-95",display:"block",shade:"medium"},aa._("Parece que tu tarjeta caduc\u00f3 o no es v\u00e1lida. Actual\u00edzala para recibir {amount} {currency} de {sender_name}.",[aa.param("currency",this.state.transfer.currency),aa.param("amount",this.state.transfer.amount),aa.param("sender_name",this.state.transfer.sender.name)])))));},renderSettingsNUX:function(){return (t.createElement("div",{className:"_4z2g"},t.createElement("div",{className:"_4z2h"},t.createElement(w,{className:"_3-95 _2pi7",display:"block",shade:"light"},t.createElement("div",{className:"_3-94"},aa._("{sender_name} te envi\u00f3 {amount} {currency}",[aa.param("sender_name",this.state.transfer.sender.name),aa.param("currency",this.state.transfer.currency),aa.param("amount",this.state.transfer.amount)])),t.createElement("div",{className:"_3-95"},this.getTimeBasedNUXMessageBody())),t.createElement(v,{label:aa._("Agregar tarjeta"),onClick:this.handleGetStartedClick,use:"confirm"}))));},getTimeBasedNUXMessageBody:function(){var ha=this.state.transfer.creationTime*1000,ia=(1000*60*60*24),ja=Date.now(),ka=(ja-ha)/ia,la=Math.max(14-Math.floor(ka),1);if(ka<=5){if(this.props.type==='settingsNUX'){return (aa._("Agrega una tarjeta de d\u00e9bito para aceptarlo."));}else return (aa._("Agrega una tarjeta de d\u00e9bito para que el dinero se acredite directamente en tu cuenta bancaria."));}else if(ka<=11){return (aa._("Este dinero se enviar\u00e1 de vuelta en {days left} d\u00edas. Agrega una tarjeta de d\u00e9bito para aceptarlo.",[aa.param("days left",la)]));}else return (aa._({"day":"Tienes {days left} d\u00eda para agregar una tarjeta de d\u00e9bito antes de que el dinero se env\u00ede de vuelta a {sender_name}.","days":"Tienes {days left} d\u00edas para agregar una tarjeta de d\u00e9bito antes de que el dinero se env\u00ede de vuelta a {sender_name}."},[aa.param("days left",la),aa['enum'](la===1?'day':'days',{day:"day",days:"days"}),aa.param("sender_name",this.state.transfer.sender.name)]));},renderLayers:function(){var ha={};if(this.state.acceptMoneyDialogShown)ha.acceptDialog=t.createElement(j,{asyncRequestState:this.state.creditCardAsyncRequestState,creditCards:this.state.creditCards,onClose:this.handleAcceptMoneyDialogClose,transfer:this.state.transfer});return ha;}});e.exports=ga;},null);