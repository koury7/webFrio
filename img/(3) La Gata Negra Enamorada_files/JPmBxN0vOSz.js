/*!CK:2406625509!*//*1426473311,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["eG89Q"]); }

__d("TimelineDOMID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={EARLIER_THIS_MONTH:"pagelet_timeline_earlier_this_month",EARLIER_THIS_MONTH_ALL:"pagelet_timeline_earlier_this_month_all",EARLIER_THIS_MONTH_EXPAND:"pagelet_timeline_earlier_this_month_expand",MEMORIES:"pagelet_timeline_memories",RECENT:"pagelet_timeline_recent",STICKY_HEADER:"timeline_sticky_header",TAB_CONTENT:"timeline_tab_content",TAB_CONTENT_EXTRA:"timeline_tab_content_extra",UNSEEN_STORIES_INDICATOR:"recent_unseen_stories_indicator",WAYBACK:"pagelet_timeline_wayback",PREFIX_MONTH:"pagelet_timeline_month_",PREFIX_MONTH_ALL:"pagelet_timeline_month_all_",PREFIX_MONTH_EXPAND:"pagelet_timeline_month_expand_",PREFIX_YEAR:"pagelet_timeline_year_",PREFIX_YEAR_EXPAND:"pagelet_timeline_year_expand_",SUFFIX_MORE_PAGER:"_more_pager"};},null);
__d("TimelinePageLoadParam",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={REQUEST_PARAM_NAME:"tipld",LAST_RANKED_UNIT_TIME:"rt",REPORT_UNIT_COUNT:"rc",STORY_UNIT_COUNT:"sc",VISIBLE_UNIT_COUNT:"vc"};},null);
__d("TimelineScrubberKey",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MEMORIES:"memories",MONTH:"month",RECENT_ACTIVITY:"recent",WAY_BACK:"way_back",YEAR:"year"};},null);
__d("ComposerXEmptyAttachment",["ComposerXAttachment"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l){"use strict";g.call(this);this._root=k;if(l)this.attachmentClassName=l;}j.prototype.getRoot=function(){"use strict";return this._root;};e.exports=j;},null);
__d("ComposerXDatepickerIconReset",["CSS","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){g.removeClass(j.element,"_4_na");g.removeClass(j.element,"_509o");}e.exports=i;},null);
__d("onViewportChanged",["EventListener","emptyFunction","getViewportDimensions","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=[],l=false,m=null,n,o;function p(){var aa=i.withoutScrollbars();return {top:0,bottom:aa.height,left:0,right:aa.width};}function q(aa,ba){var ca={transform:ba||h.thatReturnsArgument,callback:aa,needsUpdate:true};k.push(ca);x();s();return {remove:r.bind(null,ca),scheduleCheck:v.bind(null,ca)};}function r(aa){var ba=k.indexOf(aa);if(ba!==-1){k.splice(ba,1);if(k.length===0){t();m=null;}}}function s(){if(!o){o=g.listen(window,'scroll',w);n=g.listen(window,'resize',u);}}function t(){if(o){o.remove();n.remove();o=n=null;}}function u(){m=null;w();}function v(aa){aa.needsUpdate=true;x();}function w(){k.map(function(aa){return aa.needsUpdate=true;});x();}function x(){if(!l){l=true;j(function(){l=false;z();});}}function y(aa){if(aa.needsUpdate){aa.needsUpdate=false;return true;}return false;}function z(){if(!m)m=p();var aa=k.filter(y),ba=aa.map(function(ca){return ca.transform.call(null,m);});aa.forEach(function(ca,da){return ca.callback.call(null,ba[da]);});}e.exports=q;},null);
__d("onRectIsWithinViewport",["onViewportChanged"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j,k){return !(j.bottom<k.top||j.top>k.bottom||j.right<k.left||j.left>k.right);}function i(j,k){var l;function m(o){var p=j();return !!p&&h(p,o);}function n(o){if(l!==o){l=o;k(o);}}return g(n,m);}e.exports=i;},null);
__d("OnVisible.react",["React","getElementRect","onRectIsWithinViewport","onlyChild"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"OnVisible",propTypes:{onVisible:l.func,onHidden:l.func,buffer:l.number},componentDidMount:function(){this._createListener();},componentDidUpdate:function(){this._createListener();},componentWillUnmount:function(){this._removeListener();},reset:function(){this._removeListener();this._createListener();},check:function(){if(this._listener)this._listener.scheduleCheck();},_measureElementRect:function(){if(!this.isMounted())return null;var n=this.props.buffer||0,o=h(g.findDOMNode(this));o.left-=n;o.right+=n;o.top-=n;o.bottom+=n;return o;},_createListener:function(){var n=g.findDOMNode(this);if(this._listener&&n!==this._element)this._removeListener();if(!this._listener){this._element=n;this._listener=i(this._measureElementRect,function(o){var p=o?this.props.onVisible:this.props.onHidden;p&&p();}.bind(this));}},_removeListener:function(){if(this._listener){this._listener.remove();this._listener=null;}},render:function(){return j(this.props.children);}});e.exports=m;},null);
__d("OGCollectionAddCuration",["AsyncRequest","DataStore","DOM","copyProperties","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l='OGCollectionAddCuration';function m(n,o,p,q,r,s){this._container=n;this._control=o;this._itemID=p;this._surface=r;this._display=s.display;if(o)k([o.subscribe('reload',this.reloadControl.bind(this))]);if(q)h.set(String(q),l,this);if(p)h.set(String(p),l,this);}j(m,{handleDeleteAction:function(n){var o=h.get(String(n),l);if(o)o.reloadControl();},handleAddItemSuccess:function(n,o,p){var q=h.get(String(n),l);h.set(String(o),l,q);q.insertMenuIntoDialog(p);},hideControl:function(n){var o=h.get(String(n),l);o.hideControl();},insertControl:function(n,o){var p=h.get(String(n),l);p.replaceControl(o);},reloadControl:function(n){var o=h.get(String(n),l);if(o)o.reloadControl();}});j(m.prototype,{hideControl:function(){this._control.hide();},reloadControl:function(){var n=new g('/ajax/collections/add_curation').setData({itemid:this._itemID,surface:this._surface,forceedit:true,display:this._display}).setHandler(this._handleAddCurationResponse.bind(this));n.send();},insertMenuIntoDialog:function(n){this._control.insertMenuIntoDialog(n);},replaceControl:function(n){i.replace(this._container,n);},getMenuControl:function(){return this._control;},_handleAddCurationResponse:function(n){this._control.destroy();i.replace(this._container,n.payload);}});e.exports=m;},null);
__d("OGCollectionAddObject",["AsyncRequest","CSS","DOM","DOMQuery","Form","JSLogger","Parent","TidyArbiterMixin","TimelineSection","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=l.create('og_collection_add_object'),u=p({ADD_PLACEHOLDER:'OGCollectionAddObject/addPlaceholder',NEW_ITEM:'OGCollectionAddObject/newItem',PLACEHOLDER:'OGCollectionAddObject/placeholder',REMOVE_PLACEHOLDER:'OGCollectionAddObject/removePlaceholder',init:function(v,w,x,y,z){o.callWithSection(z,function(aa){this.initImpl(v,w,x,y,aa.getNode(),z,aa.id);}.bind(this));},initInReport:function(v,w,x,y){var z=m.byClass(y,"_w8_");this.initImpl(v,w,x,y,z,null,null);},initImpl:function(v,w,x,y,z,aa,ba){var ca=j.scry(z,"._620")[0];if(!ca){t.error('grid_not_found',{collection_id:aa,section:ba,csx:'.public/fbTimelineCollectionGrid/root'});return;}w.subscribe('select',function(da,ea){if(!ea.selected.uid||ea.selected.type.indexOf('disabled')!=-1)return;u.inform(u.ADD_PLACEHOLDER,aa);var fa=ca.nextSibling,ga=null;if(fa&&h.hasClass(fa,"_3t3")){h.hide(ca.lastChild);ga=ca.lastChild;}var ha=i.prependContent(ca,x.cloneNode(true))[0];u.inform(u.PLACEHOLDER,{grid:ca});var ia=p({action:'add',mechanism:'typeahead'},k.serialize(y));ha.setAttribute('data-item',ia.item_id);new g().setURI(v).setData(ia).setRelativeTo(ca).setErrorHandler(function(ja){i.remove(ha);u.inform(u.REMOVE_PLACEHOLDER,aa);ga&&h.show(ga);}).setHandler(function(ja){ga&&i.remove(ga);}).setFinallyHandler(function(ja){u.inform(u.PLACEHOLDER,{grid:ca});}).send();});},replaceItem:function(v,w,x){var y=i.scry(v,'div[data-obj="'+w+'"]')[0];if(y){var z=m.byClass(y,"_30f");if(z)u.inform(u.REMOVE_PLACEHOLDER,z.id);i.remove(y.parentNode);}var aa=i.find(v,'[data-item="'+w+'"]'+"._2804");i.replace(aa,x);this.inform(u.NEW_ITEM,{grid:v,newItem:x});},prependItem:function(v,w){var x=j.scry(s(v),"._620")[0];i.prependContent(x,w);this.inform(u.NEW_ITEM,{grid:x,newItem:w});}},n);e.exports=u;},null);
__d("OGCollectionBatchAddCuration",["AsyncRequest","Event","OGCollectionAddCuration","Parent","Run"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m;function n(p){for(var q=0;q<l[p].listeners.length;q++)l[p].listeners[q].remove();l[p]=null;}var o={loadControls:function(p,q,r){if(!q||!Array.isArray(q))return;l[r]=l[r]||{tokens:[],listeners:[]};l[r].tokens=l[r].tokens.concat(q);var s=j.byClass(p,'fbTimelineUnit');l[r].listeners.push(h.listen(s,'mouseenter',function(){new g('/ajax/collections/batch_add_curation').setData({collectionitemtokens:l[r].tokens.join(),surface:r}).send();n(r);}));if(!m){m=true;k.onLeave(function(){for(var t in l)l[t]&&n(t);l={};m=null;});}},attachControls:function(p,q){for(var r=0;r<p.length;r++)i.insertControl(p[r],q[r]);}};e.exports=o;},null);
__d("ProfileInfoRequestNoteFlyout",["CSS","csx","DOM","Event","LayerDestroyOnHide","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o){"use strict";this.$ProfileInfoRequestNoteFlyout0=o;this.$ProfileInfoRequestNoteFlyout1=i.scry(this.$ProfileInfoRequestNoteFlyout0.getContentRoot(),"._958")[0];l(j.listen(n,'click',this.$ProfileInfoRequestNoteFlyout2.bind(this)));l(this.$ProfileInfoRequestNoteFlyout0.subscribe('success',this.$ProfileInfoRequestNoteFlyout3.bind(this)));l(this.$ProfileInfoRequestNoteFlyout0.subscribe('hide',this.$ProfileInfoRequestNoteFlyout4.bind(this)));l(this.$ProfileInfoRequestNoteFlyout0.subscribe('error',this.$ProfileInfoRequestNoteFlyout5.bind(this)));}m.prototype.$ProfileInfoRequestNoteFlyout2=function(n){"use strict";this.$ProfileInfoRequestNoteFlyout0.show();n.kill();};m.prototype.$ProfileInfoRequestNoteFlyout5=function(n,o){"use strict";i.setContent(this.$ProfileInfoRequestNoteFlyout1,o.response.errorDescription);g.show(this.$ProfileInfoRequestNoteFlyout1);return false;};m.prototype.$ProfileInfoRequestNoteFlyout4=function(){"use strict";g.hide(this.$ProfileInfoRequestNoteFlyout1);};m.prototype.$ProfileInfoRequestNoteFlyout3=function(){"use strict";this.$ProfileInfoRequestNoteFlyout0.enableBehavior(k);this.$ProfileInfoRequestNoteFlyout0.hide();};e.exports=m;},null);
__d("ProfileInfoRequestSuggestion",["CSS","Event","tidyEvent"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={listenThinker:function(k,l,m){m=m||'hidden_elem';i(h.listen(k,'click',g.removeClass.bind(g,l,m)));}};e.exports=j;},null);
__d("TimelineContextItemLogger",["BanzaiLogger","Event","FBJSON","Parent","Run","cx","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n='MTimelineXContextItemsLoggerConfig',o='impression',p='click',q='context_item_url',r='event',s="_md0",t=[];function u(w,x,y){var z=i.parse(w.getAttribute('data-store'));z[r]=x;if(y)z[q]=y;g.log(n,z);}var v={logWhenVisible:function(w){if(!t.length)k.onLeave(function(){t=[];});t.push(w);},logWhenClicked:function(w){m(h.listen(w,'click',function(x){var y=x.getTarget();if(y.nodeName!=='A')return;var z=j.byClass(y,s);z&&u(z,p,y.href);}));},listenToExpand:function(w){m(w.addListener('expanded',function(){while(t.length)u(t.pop(),o);}));}};e.exports=v;},null);
__d("TimelineSecondaryColumnUnitList",["CSS","DOM","Event","Run","csx","cx","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=30;function o(p,q){"use strict";var r=i.listen(q,'click',function(){this.$TimelineSecondaryColumnUnitList0=h.scry(p,"._16f_");this.$TimelineSecondaryColumnUnitList1();h.remove(q);this.emit('expanded');}.bind(this));j.onLeave(r.remove.bind(r));}o.prototype.$TimelineSecondaryColumnUnitList1=function(){"use strict";if(!this.$TimelineSecondaryColumnUnitList0.length)return;g.removeClass(this.$TimelineSecondaryColumnUnitList0.shift(),"_16f_");setTimeout(this.$TimelineSecondaryColumnUnitList1.bind(this),n);};m(o,{expanded:true});e.exports=o;},null);
__d("TimelineCapsule",["Arbiter","CSS","DataStore","DOM","DOMQuery","DOMScroll","Parent","TimelineConstants","TimelineLegacySections","Vector","$","csx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=(function(){var u={},v={};function w(y){k.scry(y,"._3ram").forEach(function(z){var aa=z.getAttribute('data-endmarker'),ba=z.getAttribute('data-pageindex'),ca=function(){if(!z.parentNode)return;i.set(n.DS_LOADED,y.id,ba);j.remove(z);g.inform(n.SECTION_FULLY_LOADED,{scrubberKey:aa,pageIndex:ba,capsuleID:y.id,childCount:y.childNodes.length});};if(o.get(aa)){ca();}else var da=g.subscribe(n.SECTION_REGISTERED,function(ea,fa){if(fa.scrubberKey===aa){ca();da.unsubscribe();}});});g.inform('TimelineCapsule/balanced',{capsule:y});}function x(y,z){var aa=m.byAttribute(y,'data-size');if(aa)if(h.hasClass(y.parentNode,'timelineReportContent')){z(y);}else z(aa);}return {removeUnit:function(y){x(y,function(z){j.remove(z);});},removeUnitWithID:function(y){t.removeUnit(q(y));},hideUnit:function(y){x(y,function(z){h.addClass(z,'fbTimelineColumnHidden');});},undoHideUnit:function(y,z){j.remove(m.byClass(z,'hiddenText'));x(y,function(aa){h.removeClass(aa,'fbTimelineColumnHidden');});},unplacehold:function(y){var z=q(y);z.style.top=null;h.removeClass(z,'visiblePlaceholder');h.removeClass(z,'placeholder');var aa=m.byClass(z,'fbTimelineCapsule');delete u[aa.id][y];t.balanceCapsule(aa);},scrollToCapsule:function(y){if(!v.hasOwnProperty(y.id)){var z=p.getElementPosition(y.parentNode);l.scrollTo(new p(p.getScrollPosition().x,z.y-n.SCROLL_TO_OFFSET,'document'));v[y.id]=true;}},loadTwoColumnUnits:function(y){var z=q(y);s(function(){var aa=m.byClass(z,'fbTimelineSection');if(aa){var ba=k.find(z,"._3rbf"),ca=k.find(z,"._3rbh"),da=ca.offsetHeight-ba.offsetHeight;i.set(n.DS_COLUMN_HEIGHT_DIFFERENTIAL,aa.id,da);}},w.bind(null,z));}};})();e.exports=t;},null);
__d("TimelineCapsuleUtilities",["CSS"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={setFirstUnit:function(i){var j=true;for(var k=0;k<i.childNodes.length;++k){var l=i.childNodes[k];if(l.id.indexOf('tl_unit_')===0)if(j){j=false;g.addClass(l,'firstUnit');}else{g.removeClass(l,'firstUnit');break;}}}};e.exports=h;},null);
__d("TimelineComposer",["Arbiter","Bootloader","ComposerXMarauderLogger","ComposerXStore","CSS","DOM","Parent","Run","TimelineCapsuleUtilities","$","getObjectValues","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s;function t(){i.logCompleted(s.id);}function u(w){if(w.hidePost){t();return;}if(w.redirect){var x=j.getAllForComposer(s.id);q(x).forEach(function(z){if(z.reset)z.reset(z);});r(w.redirect);t();return;}if(!w.streamStory){window.location.reload();return;}if(w.backdatedTime){h.loadModules(["TimelineStoryPublisher"],function(z){z.publish(w);});t();return;}var y=v.renderCapsuleBasedStory(s,w.streamStory);g.inform('TimelineComposer/on_after_publish',y,g.BEHAVIOR_PERSISTENT);t();}var v={init:function(w){s=p(w);var x=g.subscribe('composer/publish',function(event,y){if(y.composer_id===s.id)u(y);});n.onLeave(x.unsubscribe.bind(x));},renderCapsuleBasedStory:function(w,x){var y=m.byClass(w,'fbTimelineCapsule');if(!y)return;var z=m.byClass(w,'fbTimelineUnit'),aa=z.nextSibling;if(aa&&aa.getAttribute('data-spine'))z=z.nextSibling;l.insertAfter(z,x);var ba=x;if(k.hasClass(x,'fbTimelineUnit'))ba=l.find(x,'div.timelineUnitContainer');h.loadModules(["Animation"],function(ca){new ca(ba).from('backgroundColor','#fff8dd').to('backgroundColor','#fff').duration(2000).ease(ca.ease.both).go();});o.setFirstUnit(y);return x;}};e.exports=a.TimelineComposer||v;},null);
__d("TimelineUnitSelector",["DOMQuery","csx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={getUnitsWithTime:function(j){return g.scry(j,"._5jmm[data-time]");}};e.exports=i;},null);
__d("TimelineComposerUtilities",["Event","Arbiter","Bootloader","CSS","DOM","DOMQuery","Parent","TimelineUnitSelector","Vector","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=86400*31,r=86400000,s={listenToSetEstimatedDate:function(t,u){return h.subscribe('ComposerXTimelineTagger/init',function(v,w){if(l.contains(t,w.datePickerElement)){s.setEstimatedDate(w.datePickerInstance,u());w.composerTimelineTagger.switchToTagger('date');}});},listenToPublish:function(t,u){if(t.root)t=t.root;return h.subscribe('composer/publish',function(event,v){if(v.composer_id===t.id)i.loadModules(["TimelineStoryPublisher"],function(w){w.publish(v);u&&u();});});},listenToAnotherComposerOpen:function(t,u){return h.subscribe('composer/mutate',function(v,w){if(w!==t)u();});},listenToCancel:function(t,u){return g.listen(t,'click',function(event){if(m.byClass(event.getTarget(),"_306"))u();});},setEstimatedDate:function(t,u){var v,w;if(u&&j.hasClass(u,'fbTimelineCapsule')){v=u.getAttribute('data-start');w=u.getAttribute('data-end');if(v&&w){var x=new Date(w*1000),y=new Date();if(x>y){t.setDate(y.getFullYear(),y.getMonth()+1,y.getDate());}else if(w-v>2*q){t.setDate(x.getFullYear());}else t.setDate(x.getFullYear(),x.getMonth()+1);}return;}var z=m.byClass(u,'fbTimelineCapsule');if(z){v=z.getAttribute('data-start');w=z.getAttribute('data-end');var aa=o.getElementPosition(u).y,ba=[w,null],ca=[v,null],da=n.getUnitsWithTime(z);for(var ea=0;ea<da.length;ea++){var fa=da[ea],ga=k.scry(fa.parentNode,'.spinePointer')[0];if(!ga)continue;var ha=o.getElementPosition(ga).y;if(ha<=aa){if(!ba[1]||ha>ba[1])ba=[fa.getAttribute('data-time'),ha];}else if(!ca[1]||ha<ca[1])ca=[fa.getAttribute('data-time'),ha];}if(ba[0]!==null&&ca[0]!==null){var ia=Math.round((parseInt(ba[0],10)+parseInt(ca[0],10))/2)*1000;ia=Math.min(new Date()-r,ia);t.setDateWithTimestamp(ia);}}}};e.exports=s;},null);
__d("TimelineSectionStore",["TimelinePageLoadParam","KeyedCallbackManager"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=new h(),j='num_reports_tried',k='num_reports_visible',l='more_pager_data',m={getDataToLoadNextSegment:function(n,o){i.executeOrEnqueue(n,function(p){this._mergeReportsAndStoriesDataCallback(p,o);}.bind(this));},setReportsData:function(n,o,p){var q=i.getResource(n);if(!q)q={};q[j]=o;q[k]=p;i.setResource(n,q);},setStoriesData:function(n,o){var p=i.getResource(n);if(!p)p={};p[l]=o;i.setResource(n,p);},_mergeReportsAndStoriesDataCallback:function(n,o){var p=n[l];if(!p.hasOwnProperty(g.REQUEST_PARAM_NAME))p[g.REQUEST_PARAM_NAME]={};p[g.REQUEST_PARAM_NAME][g.REPORT_UNIT_COUNT]=n[j];var q=p[g.REQUEST_PARAM_NAME][g.VISIBLE_UNIT_COUNT];p[g.REQUEST_PARAM_NAME][g.VISIBLE_UNIT_COUNT]=q+n[k];o(p);}};e.exports=m;},null);
__d("TimelineParallelColumnPager.react",["Link.react","React","TimelineSectionStore","UIPagelet","LoadingIndicator.react","OnVisible.react"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o={},p={STATE_WAITING_FOR_ONVISIBLE:'state_waiting_for_onvisible',STATE_LOADING_INDICATOR:'state_loading_indicator',STATE_LINKIFIED:'state_linkified'},q=h.createClass({displayName:"TimelineParallelColumnPager",propTypes:{loadMoreLabel:n.string.isRequired,sectionKey:n.string.isRequired,rootID:n.string.isRequired},componentWillMount:function(){o[this.props.sectionKey]=this;},getInitialState:function(){return {pagerState:p.STATE_WAITING_FOR_ONVISIBLE};},render:function(){if(this.state.pagerState===p.STATE_LOADING_INDICATOR)return h.createElement(k,{size:"small",color:"white"});if(this.state.pagerState===p.STATE_LINKIFIED)return (h.createElement(g,{onClick:this._loadNextSegment},this.props.loadMoreLabel));return (h.createElement(l,{onVisible:this._loadNextSegment},h.createElement("div",null)));},statics:{getInstance:function(r){return o[r];}},removeOnVisible:function(){this.setState({pagerState:p.STATE_LINKIFIED});},_loadNextSegment:function(){this.setState({pagerState:p.STATE_LOADING_INDICATOR});i.getDataToLoadNextSegment(this.props.sectionKey,this._nextSegmentDataHandler);},_nextSegmentDataHandler:function(r){var s={usePipe:true,jsNonblock:true,buffer:1000,constHeight:true,target_id:r.unit_container_id,crossPage:true};j.loadFromEndpoint('ProfileTimelineSectionPagelet',this.props.rootID,r,s);}});e.exports=q;},null);
__d("TimelineContentLoader",["Arbiter","CSS","DOM","DOMScroll","Event","OnVisible","Parent","ScrollingPager","TimelineComponentKeys","TimelineConstants","TimelineController","TimelineDOMID","TimelineLegacySections","TimelineParallelColumnPager.react","TimelineScrubberKey","TimelineSmartInsert","UIPagelet","Vector","$","arrayContains","copyProperties","createArrayFromMixed","csx","debounce","ge","getElementText","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){b.__markCompiled&&b.__markCompiled();var ha=false,ia,ja=null,ka={},la=[],ma={},na=[],oa={},pa={},qa={},ra={},sa=false,ta=null;function ua(db,eb,fb,gb,hb){"use strict";this.node=db;this.loaded=gb;this.canScrollLoad=true;this.canUnload=eb!==u.RECENT_ACTIVITY;this.scrubberKey=eb;this.historicUnitCount=hb;this._pageletLoadData=fb;this._expandPageletLoadData={};this.rightColumnFinished=false;}ua.prototype.load=function(db,eb){"use strict";if(this.loaded)return;var fb=this._pageletLoadData;g.inform(p.SECTION_LOADING,{data:fb,scrubberKey:this.scrubberKey});this.loaded=true;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');var gb='ProfileTimelineSectionPagelet',hb=this.scrubberKey===u.WAY_BACK;if(hb)gb='ProfileTimelineRemainingYearsPagelet';fb.highlight_unit_data=db;fb.parent_key=this.parentKey;fb.force_no_friend_activity=sa;h.addClass(this.node,'fbTimelineSectionLoading');this.canScrollLoad=false;var ib=null;if(eb){this.node.style.minHeight=window.innerHeight+'px';ib=function(){this.node.style.minHeight='';za(this.scrubberKey);}.bind(this);}qa[this.scrubberKey]=w.loadFromEndpoint(gb,this.node.id,fb,{usePipe:true,jsNonblock:true,constHeight:true,append:false,finallyHandler:ib});ab();};ua.prototype.preload=function(){"use strict";h.addClass(this.node,'fbTimelineTimePeriodSuppressed');h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');var db=i.find(this.node,'span.sectionLabel');if(db.getAttribute('data-original-label')){i.setContent(db,db.getAttribute('data-original-label'));db.removeAttribute('data-original-label');}};ua.prototype.unload=function(){"use strict";if(!this.loaded||!this.canUnload)return;this.loaded=false;qa[this.scrubberKey]&&qa[this.scrubberKey].cancel();h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');if(this.node.nextSibling&&h.hasClass(this.node.nextSibling,'fbTimelineSection')){i.setContent(this.node,this.node.nextSibling);h.show(this.node.firstChild);}else i.empty(this.node);this.deactivateScrollLoad();};ua.prototype.activateScrollLoad=function(){"use strict";this.canScrollLoad=true;h.removeClass(this.node,'fbTimelineTimePeriodSuppressed');h.addClass(this.node,'fbTimelineTimePeriodUnexpanded');pa[this.scrubberKey]&&pa[this.scrubberKey].reset();};ua.prototype.deactivateScrollLoad=function(){"use strict";if(!this.loaded){this.canScrollLoad=false;h.removeClass(this.node,'fbTimelineTimePeriodUnexpanded');h.addClass(this.node,'fbTimelineTimePeriodSuppressed');pa[this.scrubberKey]&&pa[this.scrubberKey].remove();}i.scry(this.node,'.fbTimelineSectionExpandPager').forEach(function(db){var eb=n.getInstance(db.id);eb&&eb.removeOnVisible();var fb=m.byClass(db,'stat_elem');if(fb)h.removeClass(fb,'async_saving');});};ua.prototype.setExpandLoadData=function(db){"use strict";this._expandPageletLoadData=db;return this;};ua.prototype.appendData=function(db){"use strict";aa(this._pageleLoadData,db);return this;};ua.prototype.expandSubSections=function(){"use strict";if(this.subSections.length)cb.navigateToSection(this.subSections[0].scrubberKey);};ua.prototype.expand=function(db){"use strict";if(!this.loaded)return;var eb=i.find(this.node,'.fbTimelineSectionExpander');h.addClass(eb.firstChild,'async_saving');db&&h.addClass(db,'async_saving');cb.navigateToSection(this.scrubberKey);i.scry(this.node,'.fbTimelineCapsule').forEach(i.remove);this._expandPageletLoadData.new_expand=true;qa[this.scrubberKey]&&qa[this.scrubberKey].cancel();qa[this.scrubberKey]=w.loadFromEndpoint('ProfileTimelineSectionPagelet',eb.id,this._expandPageletLoadData,{usePipe:true,jsNonblock:true,constHeight:true});};ua.prototype.isPermalinkPeriod=function(){"use strict";return this._pageletLoadData.is_permalink_period;};ua.prototype.isHiddenFromView=function(){"use strict";return (!this.loaded||oa[this.scrubberKey]||h.hasClass(this.node,'fbTimelineTimePeriodUnexpanded'));};function va(){if(ha)return;q.register(o.CONTENT,cb);ha=true;}var wa=da(function(db,eb,fb){var gb=s.get(db).historicUnitCount;eb-=gb;fb-=1;if(gb==-1||fb<=0||eb<0)return;var hb=cb.getNextSectionKey(db);if(hb){s.get(hb).load();wa(hb,eb,fb);}},500);function xa(db,eb,fb,gb){var hb=cb.getNextSectionKey(eb);if(hb){pa[hb]=new l(db,ya.bind(null,hb),false,fb||1000);}else if(eb!==u.WAY_BACK){gb=gb?gb:0;if(gb>80)return null;setTimeout(xa.bind(null,db,eb,fb,gb+1),250);}}function ya(db){var eb=s.get(db);if(eb&&eb.canScrollLoad){eb.load();if(ta)wa(db,ta.required_units,ta.max_parallelism);}}function za(db){var eb=pa[db];if(eb){eb.remove();pa[db]=null;i.remove(eb.getElement());}}function ab(){var db,eb,fb=false;for(var gb=0;gb<la.length;gb++){var hb=la[gb];if(!hb)continue;var ib=s.get(hb);if(ib&&(ib.canScrollLoad||ib.loaded)){if(!ib.loaded){h.removeClass(ib.node,'fbTimelineTimePeriodSuppressed');h.addClass(ib.node,'fbTimelineTimePeriodUnexpanded');}if(db&&eb){bb(db,eb);if(fb)db.deactivateScrollLoad();fb=true;}db=null;eb=null;continue;}else if(db){eb=ib;ib.deactivateScrollLoad();}else{db=ib;if(fb)ib.activateScrollLoad();}h.removeClass(ib.node,'fbTimelineTimePeriodSuppressed');h.addClass(ib.node,'fbTimelineTimePeriodUnexpanded');}}function bb(db,eb){h.removeClass(eb.node,'fbTimelineTimePeriodUnexpanded');h.addClass(eb.node,'fbTimelineTimePeriodSuppressed');var fb=i.find(db.node,'span.sectionLabel'),gb=i.find(eb.node,'span.sectionLabel');if(!gb.getAttribute('data-original-label'))gb.setAttribute('data-original-label',fa(gb));if(fb.getAttribute('data-month')&&gb.getAttribute('data-month')&&fb.getAttribute('data-year')==gb.getAttribute('data-year')){i.setContent(gb,ga._("Mostrar {month1} a {month2} de {year}",[ga.param("month1",gb.getAttribute('data-month')),ga.param("month2",fb.getAttribute('data-month')),ga.param("year",fb.getAttribute('data-year'))]));}else if(fb.getAttribute('data-year')!==gb.getAttribute('data-year')){i.setContent(gb,ga._("Mostrar  {year1} a {year2}",[ga.param("year1",gb.getAttribute('data-year')),ga.param("year2",fb.getAttribute('data-year'))]));}else i.setContent(gb,ga._("Mostrar {year}",[ga.param("year",gb.getAttribute('data-year'))]));}var cb={HEADER_SCROLL_CUTOFF:80,CURRENT_SECTION_OFFSET:150,registerTimePeriod:function(db,eb,fb,gb,hb,ib,jb){va();if(z(na,eb))return;if(ma)aa(fb,ma);var kb=new ua(db,eb,fb,gb,jb);if(!hb){la[ib]=eb;ka[eb]=true;}else{kb.parentKey=hb;s.get(hb).subSections=s.get(hb).subSections||[];s.get(hb).subSections[ib]=kb;}s.set(eb,kb);cb.checkCurrentSectionChange();g.inform(p.SECTION_REGISTERED,{scrubberKey:eb,period:kb});},reset:function(){for(var db in pa)pa[db]&&pa[db].remove();for(var eb in qa)qa[eb]&&qa[eb].cancel();for(var fb in ra){ra[fb].unsubscribe();delete ra[fb];}ia&&ia.unsubscribe();ia=null;s.removeAll();ja=null;ka={};la=[];ma={};na=[];oa={};pa={};qa={};sa=false;ha=false;},checkCurrentSectionChange:function(){var db=cb.getCurrentSection(),eb=ja&&ja.scrubberKey;if(db&&db.scrubberKey!==eb&&!db.isPermalinkPeriod()){ja=db;var fb=db.scrubberKey,gb=db.parentKey;if(!gb){gb=fb;fb=null;}q.sectionHasChanged(gb,fb);}},setParallelLoadConfig:function(db){ta=db;},getCurrentSection:function(){var db={},eb=s.getAll();for(var fb in eb){var gb=eb[fb];if(!gb.loaded||oa[gb.scrubberKey])continue;var hb=x.getElementPosition(gb.node,'viewport').y;if(gb.scrubberKey===u.RECENT_ACTIVITY)hb--;if(hb<cb.CURRENT_SECTION_OFFSET)db[hb]=gb;}var ib=Math.max.apply(null,Object.keys(db)),jb=ib==-Infinity;if(!jb){return db[ib];}else if(la[0])return s.get(la[0]);return null;},getLastVisibleSection:function(){for(var db=la.length-1;db>=0;db--){var eb=s.get(la[db]);if(eb&&!eb.isHiddenFromView())return eb;}return null;},capsuleForCurrentSection:function(){var db=cb.getCurrentSection();return db&&i.scry(db.node,'.fbTimelineCapsule')[0];},enableScrollLoad:function(db,eb,fb,gb){db=y(db);var hb=m.byClass(db,'fbTimelineSection')||db.parentNode,ib=hb&&i.scry(hb,'.fbTimelineCapsule')[0];if(!ib)return;if(fb===null){xa(db,eb,gb);}else q.runOnceWhenSectionFullyLoaded(xa.bind(null,db,eb,gb),eb,fb);},expandSectionOnClick:function(db,eb){k.listen(db,'click',function(fb){fb.prevent();s.get(eb).expand();});},expandSubSectionsOnClick:function(db,eb){k.listen(db,'click',function(fb){fb.prevent();s.get(eb).expandSubSections();});},getNextSectionKey:function(db){for(var eb=0;eb<la.length-1;eb++)if(la[eb]==db){while(eb<la.length-1&&!la[eb+1])eb++;return la[eb+1];}var fb=s.get(db);if(!fb||!fb.parentKey)return;var gb=s.get(fb.parentKey);if(!gb)return;for(var hb=0;hb<gb.subSections.length-1;hb++)if(gb.subSections[hb].scrubberKey==db)return gb.subSections[hb+1].scrubberKey;},hideSection:function(db){var eb=s.get(db);eb&&h.hide(i.find(eb.node,'.fbTimelineSection'));var fb=q.getCurrentScrubber();if(fb){var gb=null;if(!ka[db]){var hb=eb.parentKey;gb=q.getCurrentScrubber().getSubnav(hb,db);}else gb=q.getCurrentScrubber().getNav(db);gb&&h.hide(gb);}var ib=q.getCurrentStickyHeaderNav();ib&&ib.removeTimePeriod(db);oa[db]=true;},loadSectionOnClick:function(db,eb){k.listen(db,'click',function(fb){fb.prevent();s.get(eb).load();});},removeSection:function(db){for(var eb in la)if(la[eb]==db){la[eb]=null;break;}s.remove(db);delete ka[db];if(db in pa){pa[db].remove();delete pa[db];}var fb=q.getCurrentStickyHeaderNav();fb&&fb.removeTimePeriod(db);na.push(db);},removeSectionParent:function(db){i.remove(y(db).parentNode);},navigateToSection:function(db,eb,fb){eb=!!eb;var gb=db,hb=s.get(db);if(!hb)return;if(!hb.loaded){v.enable();i.scry(y(r.TAB_CONTENT),'.fbTimelineShowOlderSections').forEach(i.remove);}if(!ka[db]){if(!hb.loaded)hb.node.style.minHeight=x.getViewportDimensions().y+'px';var ib=g.subscribe(p.SECTION_FULLY_LOADED,function(qb,rb){if(rb.scrubberKey===db){hb.node.style.minHeight='';ib.unsubscribe();}});gb=hb.parentKey;var jb=s.get(gb).node;if(!h.hasClass(jb,'fbTimelineSectionExpanded')){j.scrollTo(jb,0);h.addClass(jb,'fbTimelineSectionExpanded');i.scry(jb,'.fbTimelineCapsule').forEach(i.remove);i.scry(jb,'div.fbTimelineSectionExpandPager').forEach(i.remove);i.scry(jb,'div.fbTimelineContentHeader').forEach(i.remove);i.scry(jb,"._5vf").forEach(function(qb){if(!qb.getAttribute('data-subsection'))i.remove(qb);});}var kb=cb.getNextSectionKey(gb);if(kb&&pa[kb])pa[kb].setBuffer(0);}for(var lb=0;lb<la.length;lb++){var mb=la[lb];if(!mb)continue;if(mb==gb)break;s.get(mb).deactivateScrollLoad();var nb=t.getInstance(mb);nb&&nb.removeOnVisible();}hb.load(fb,true);ab();var ob=x.getScrollPosition().x,pb=x.getElementPosition(hb.node).y;if(!eb)j.scrollTo(new x(ob,pb-p.SCROLL_TO_OFFSET,'document'),true,false,false,0,function(){var qb=x.getElementPosition(hb.node).y;j.scrollTo(new x(ob,qb-p.SCROLL_TO_OFFSET,'document'),false);var rb=i.scry(hb.node,'h3.uiHeaderTitle')[0];if(rb){rb.tabIndex=0;rb.focus();}});},appendContentAfterLoad:function(db,eb,fb){q.runOnceWhenSectionFullyLoaded(i.appendContent.bind(null,y(db),eb),fb,'0');},markSectionAsLoaded:function(db,eb,fb){q.runOnceWhenSectionFullyLoaded(function(){ea(db)&&h.removeClass(y(db).parentNode,'fbTimelineSectionLoading');},eb,fb);},suppressSectionsAbove:function(db){var eb,fb;for(var gb=0;gb<la.length;gb++){var hb=la[gb];if(!hb)continue;eb=s.get(hb).node;fb=null;if(ba(db.parentNode.children).indexOf(db)<=ba(eb.parentNode.children).indexOf(eb)){fb=hb;break;}s.get(hb).deactivateScrollLoad();}if(fb)cb.navigateToSection(fb,true);},forceNoFriendActivity:function(){sa=true;},removeDupes:function(db){var eb=ea(db);if(!eb)return;var fb=i.scry(eb,'li.fbTimelineUnit'),gb={};for(var hb=0;hb<fb.length;hb++){var ib=fb[hb];if(ib.id&&ib.id.startsWith('tl_unit_')){var jb=ib.id.substring(8,ib.id.length),kb=i.scry(ib,'div.timelineUnitContainer');if(kb.length>0)jb=jb+kb[0].getAttribute('data-time');if(gb.hasOwnProperty(jb)){ib.id='dupe_unit_'+Math.random();ib.className="hidden_elem";}else gb[jb]=1;}}},removeLoadingState:function(db){ea(db)&&h.removeClass(y(db),'fbTimelineSectionLoading');},setExpandLoadDataForSection:function(db,eb){var fb=s.get(db);fb&&fb.setExpandLoadData(eb);},appendSectionDataForAllSections:function(db){ma=db;for(var eb=0;eb<la.length-1;eb++){var fb=la[eb];if(!fb)continue;var gb=s.get(fb);gb&&gb.appendData(db);}},updatePagerAfterLoad:function(db,eb,fb,gb,hb){var ib=n.getInstance(db.firstChild.id);if(!ib){ra[db.firstChild.id]=g.subscribe(n.REGISTERED,function(kb,lb){ra[db.firstChild.id].unsubscribe();delete ra[db.firstChild.id];if(lb.id===db.firstChild.id)cb.updatePagerAfterLoad(db,eb,fb,gb,hb);});return;}var jb=ib.getHandler();ib.setHandler(function(kb){h.addClass(db,'async_saving');jb(kb);});q.runOnceWhenSectionFullyLoaded(function(){h.removeClass(db,'fbTimelineHiddenPager');ib.checkBuffer();},fb,gb);if(hb)q.runOnceWhenSectionFullyLoaded(q.adjustScrollingPagerBuffer.bind(null,db.firstChild.id,eb),fb,gb);},repositionDialog:function(db){g.subscribe(p.SECTION_LOADED,function(){db.updatePosition();});},rightColumnFinished:function(db){var eb=s.get(db);eb.rightColumnFinished=true;},addUnrankedUnits:function(db){var eb=y(db),fb=i.scry(eb,'li.fbTimelineUnit');for(var gb=fb.length-1;gb>=0;gb--){var hb=fb[gb];i.insertAfter(eb,hb);h.addClass(i.find(hb,'div.timelineUnitContainer'),'fbTimelineHighlightUnit');}i.remove(eb);},addUnrankedStories:function(db){var eb=y(db),fb=i.scry(eb,"._5pat");for(var gb=fb.length-1;gb>=0;gb--){var hb=fb[gb];i.insertAfter(eb,hb);}i.remove(eb);g.inform('Timeline/unrankedStoriesLoaded');}};e.exports=cb;},null);
__d("TimelineLogging",["TimelineComponentKeys","TimelineController","reportData"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=false,k=0,l=null,m=null,n={init:function(o){if(j)return;k=o;h.register(g.LOGGING,this);},reset:function(){j=false;k=0;l=null;},log:function(o,p){p.profile_id=k;i(o,{gt:p});},logSectionChange:function(o,p){var q={timeline_section_change:1,key:o};if(l&&o==l){q.timeline_scrubber=1;l=null;}if(m&&o==m){q.sticky_header_nav=1;m=null;}n.log('timeline',q);},logScrubberClick:function(o){l=o;},logStickyHeaderNavClick:function(o){m=o;}};e.exports=n;},null);
__d("TimelineStickyHeaderComposerX",["Arbiter","Bootloader","ComposerXController","CSS","DOMQuery","Event","Parent","Run","TimelineComposerUtilities","TimelineContentLoader","TimelineStickyHeader","Vector","csx","cx","getElementText"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){b.__markCompiled&&b.__markCompiled();function v(x){return x&&x.getContext&&m.byClass(x.getContext(),"_2wp");}function w(x){"use strict";this._composerRoot=x;this._tokens=[o.listenToSetEstimatedDate(this._composerRoot,p.capsuleForCurrentSection),o.listenToPublish(this._composerRoot,this._close.bind(this)),g.subscribe('PhotoSnowlift.OPEN',this._close.bind(this)),g.subscribe('TimelineMLE/mleFlyoutShown',function(y,z){if(v(z)===this._composerRoot)i.reset(this._composerRoot);}.bind(this)),g.subscribe('composer/initializedAttachment',function(y,z){if(z.composerRoot===this._composerRoot){this._registerClickToDismiss();if(!z.isInitial)this._closeMLE();}else this._close();}.bind(this)),g.subscribe(q.ADJUST_WIDTH,this._toggleNarrowMode.bind(this))];this._clickCancelToken=o.listenToCancel(this._composerRoot,this._close.bind(this));n.onLeave(function(){while(this._tokens.length)this._tokens.pop().unsubscribe();this._clearClickDismissToken();if(this._clickCancelToken){this._clickCancelToken.remove();this._clickCancelToken=null;}}.bind(this));}w.prototype._toggleNarrowMode=function(event,x){"use strict";h.loadModules(["Tooltip"],function(y){var z=r.getElementDimensions(x).x>400,aa=k.scry(this._composerRoot,"._9lb");j.conditionClass(this._composerRoot,"_2wq",z);for(var ba=0;ba<aa.length;ba++){var ca=aa[ba],da=u(ca);if(z){y.set(ca,da);}else y.remove(ca);}}.bind(this));return false;};w.prototype._registerClickToDismiss=function(){"use strict";var x=j.hasClass(k.find(this._composerRoot,"._yq"),"_519b");if(!x){this._clearClickDismissToken();return;}this._clickDismissToken=l.listen(document.body,'click',function(y){var z=m.byClass(y.getTarget(),"_2wp");if(!z){this._close();this._clearClickDismissToken();}}.bind(this));};w.prototype._clearClickDismissToken=function(){"use strict";if(this._clickDismissToken){this._clickDismissToken.remove();this._clickDismissToken=null;}};w.prototype._close=function(){"use strict";this._clearClickDismissToken();this._closeMLE();i.reset(this._composerRoot);};w.prototype._closeMLE=function(){"use strict";h.loadModules(["TimelineMLE"],function(x){var y=x.getFlyout();if(v(y)===this._composerRoot)x.hideFlyout();}.bind(this));};e.exports=w;},null);
__d("TimelineOGCollectionReportGrid",["CSS","OGCollectionAddObject"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={init:function(j,k){h.subscribe([h.NEW_ITEM,h.PLACEHOLDER],i.hideOverflowNodes.bind(null,j,k));},hideOverflowNodes:function(j,k,l,m){if(m.grid!=j)return;for(var n=0;n<j.childNodes.length;n++)g.conditionShow(j.childNodes[n],n<k);}};e.exports=i;},null);
__d("TimelineSpinelessComposer",["Arbiter","Bootloader","ComposerXMarauderLogger","Run","TimelineComposer","TimelineComposerUtilities"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m;function n(){i.logCompleted(m.id);}function o(q){if(q.hidePost){n();return;}if(!q.streamStory){window.location.reload();return;}if(q.backdatedTime){h.loadModules(["TimelineStoryPublisher"],function(r){r.publish(q);});n();return;}k.renderCapsuleBasedStory(m,q.streamStory);n();}var p={init:function(q){m=q;var r=g.subscribe('composer/publish',function(event,s){if(s.composer_id===m.id)o(s);});j.onLeave(r.unsubscribe.bind(r));}};e.exports=p;},null);
__d("TimelineStickyRightColumn",["Arbiter","CSS","DOMQuery","Event","PhotoSnowlift","Run","Style","TimelineContentLoader","Vector","csx","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=100,s=15,t=15,u=35,v="._3rbf",w="._3rbh",x=false,y=null,z=null,aa,ba,ca,da,ea,fa,ga,ha,ia,ja;function ka(){if(k.getInstance().isOpen)return;aa=n.getCurrentSection();if(!aa||!aa.rightColumnFinished)return;var za=ta(aa),ab=sa(aa);ca=za?za.offsetHeight:0;da=ab?ab.offsetHeight:0;ea=o.getViewportDimensions().y;ia=za?o.getElementPosition(za).y:0;ba=n.getLastVisibleSection();fa=aa.node.offsetHeight;ja=document.body.clientWidth<document.body.scrollWidth;}function la(){if(!aa||k.getInstance().isOpen)return;if(z&&z!==aa){var za=sa(z);if(za)ua(za,'','','');}var ab=sa(aa);if(!ab)return;if(ja){ua(ab,'','','');return;}if(aa.rightColumnFinished){ma(aa,ab);z=pa(ab)==='fixed'?aa:null;}}function ma(za,ab){if(da>=ca||ca<=ea)return;ha=ga;ga=o.getScrollPosition().y;var bb=ia-va();if(ga<=bb){ua(ab,'','','');return;}var cb=t+u,db=ga+ea-cb,eb=ga+da+va(),fb=ia+fa;if(aa===ba)fb+=u;if(fb<=Math.min(eb,db)){ua(ab,'absolute','',t+'px');return;}var gb=ea-t-va();if(da<=gb){ua(ab,'fixed',va()+'px','');return;}if(ga<ha){na(ab);}else oa(ab);}function na(za){var ab=false;if(pa(za)==='absolute'){var bb=ia+ca-va(),cb=ga+va()-ia;if(!!ra(za)&&cb<=ra(za)){ab=true;}else if(za.style.bottom!==''&&ga<=bb-da)ab=true;}if(ab){ua(za,'fixed',va()+'px','');return;}if(pa(za)==='absolute'&&!!ra(za))return;if(qa(za)){if(ra(za)>=va())return;var db=ea-u,eb=ga-ia-(da-db);if(ha)eb+=ha-ga;ua(za,'absolute',eb+'px','');return;}}function oa(za){var ab,bb=false;if(!qa(za)){ab=ra(za);var cb=ga+ea,db=ia+ab+da+u;if(cb>=db)bb=true;}if(!bb)if(ga===ha||!qa(za))return;if(bb){ab=ea-da-t-u;ua(za,'fixed',ab+'px','');return;}if(qa(za)&&ra(za)>=va()){ab=ga-ia+va();if(ha)ab+=ha-ga;ua(za,'absolute',ab+'px','');}}function pa(za){switch(za.style.position){case 'absolute':case 'static':return za.style.position;default:return h.hasClass(za,'fixed_always')?'fixed':'static';}}function qa(za){switch(pa(za)){case 'absolute':case 'static':return false;default:return true;}}function ra(za){return za.style.top?parseInt(za.style.top,10):0;}function sa(za){return i.scry(za.node,w)[0];}function ta(za){return i.scry(za.node,v)[0];}function ua(za,ab,bb,cb){m.set(za,'bottom',cb);if(ab==='fixed'){h.addClass(za,'fixed_always');m.set(za,'position','');}else{h.removeClass(za,'fixed_always');m.set(za,'position',ab);}m.set(za,'top',bb);g.inform('reflow');}function va(){return h.hasClass(document.documentElement,'tinyViewport')?s:r;}function wa(){q(ka,la);}function xa(){x=false;z=null;while(y.length)y.pop().remove();y=null;}var ya={init:function(){if(!x){x=true;y=[j.listen(window,'scroll',wa),j.listen(window,'resize',wa)];l.onLeave(xa);}},adjust:function(){if(x){ka();la();}}};e.exports=ya;},null);